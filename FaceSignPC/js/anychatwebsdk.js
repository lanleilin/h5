/*! Copyright (c) 2005--2017 BaiRuiTech.Co.Ltd. All rights reserved. */
!function(e){function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){function o(){this.anychat=null,this.eventTarget=c.instance,this.isInitDone=!1,this.curConnectStatus=i.instance.ConnectStatus.INIT,this.disconnectResultCode=0,this.eventDispatcher=u.instance,this.constant=i.instance,this.strUserId=T.strUserId,this.bSupportStreamRecordCtrlEx=!1,this.bSupportObjectBusiness=!1,this.bSupportMultiStream=!1,this.bSupportScriptObject=!1,this.bSupportCluster=!1,this.isCluster=0}function n(){this.anychatSDKInstance=null}function a(e){BRAC_SetSDKOption(BRAC_SO_CORESDK_LOGFILERULE,e.logFileRule),BRAC_SetSDKOption(BRAC_SO_CORESDK_LOGFILEROOTPATH,e.logSavepath)}var s=t(1),i=t(2),c=t(3),d=t(4),C=t(7),u=t(8),l=t(12),g=t(13),A=(t(14),t(15)),_=t(9),f=t(10),p=t(6),E=t(5),I=t(16),S=t(11),R=s.getLogger("main"),T={},h=d.getIntUserId;d.getStrUserId;o.prototype.init=function(e){var r=BRAC_InitSDK("0");if(R.invokeLog("init",r),0===r){if(this.isInitDone=!0,T.logSavepath){var t={};t.logSavepath=T.logSavepath,t.logFileRule=T.logFileRule,a(t)}this.curConnectStatus=this.constant.ConnectStatus.INITIALIZED,this.anychat=anychat,T.hasOwnProperty("appId")&&""!=T.appId&&BRAC_SetSDKOption(BRAC_SO_CLOUD_APPGUID,T.appId);BRAC_Connect(T.serverIp,T.serverPort);this.eventDispatcher.callbackinit(this,anychat),bSupportHtml5&&this.eventDispatcher.h5On(this,anychat),1==T.openNativeScreenCamera&&BRAC_SetSDKOption(BRAC_SO_CORESDK_SCREENCAMERACTRL,1)}else this.eventTarget.fireEvent({type:"onDisConnect",result:{code:r,msg:E.checkErrorMsg(r)}})},o.prototype.disConnect=function(){var e=BRAC_Logout();if(0==e){e=101;var r=E.checkErrorMsg(e)}var t={errorCode:e,msg:r};instance.eventTarget.fireEvent({type:"onDisConnect",result:t}),R.invokeLog("disConnect",e)},o.prototype.login=function(){var e={nickName:T.nickName,userId:T.userId,strUserId:T.strUserId,password:T.password,appId:T.appId,timeStamp:T.timeStamp},r=d.instance.login(e),t=JSON.parse(JSON.stringify(e));return delete t.password,R.invokeLog("login",r,t),r},o.prototype.logout=function(){var e=d.instance.logout(this);return T={},p.instance.areaIdArray=[],p.instance.areaIdIndex=0,d.instance.userType=-1,bSupportHtml5||BRAC_Release(),c.instance.removeAll(),n.anychatSDKInstance=null,R.invokeLog("logout",e),e},o.prototype.enterRoom=function(e){if(!e.roomId)return!1;T.roomId=e.roomId,"function"==typeof e.done&&this.setCallBack("OnAnyChatEnterRoom",e.done,!0);var r=d.instance.enterRoom(e);R.invokeLog("enterRoom",r,{roomId:e.roomId})},o.prototype.getRoomUsers=function(){R.invokeLog("getRoomUsers");var e=d.instance.getRoomUsers();return e},o.prototype.leaveRoom=function(){var e=d.instance.leaveRoom(this);return R.invokeLog("leaveRoom",e),e},o.prototype.sendMsg=function(e){e.targetUsers&&(e.targetUsers=e.targetUsers.map(h));var r=d.instance.sendMsg(e);R.invokeLog("sendMsg",r,e)},o.prototype.transBuffer=function(e){e.targetUsers&&(e.targetUsers=e.targetUsers.map(h)),"function"==typeof e.done&&this.setCallBack("onTransBufferDone",e.done,!0);var r=d.instance.transBufferEx(e),t=r>0?0:-1,o=JSON.parse(JSON.stringify(e));"function"==typeof o.done&&delete o.done,R.invokeLog("TransBuffer",t,o)},o.prototype.getMicrophones=function(){R.invokeLog("getMicrophoneList");var e=[];e=BRAC_EnumDevices(BRAC_DEVICE_AUDIOCAPTURE),bSupportHtml5&&0==e.length&&e.push("1-Virtual Microphone");for(var r=[],t=0;t<e.length;t++)r.push(new l.instance(e[t]));return r},o.prototype.getSpeaks=function(){R.invokeLog("getSpeakList");for(var e=BRAC_EnumDevices(BRAC_DEVICE_AUDIOPLAYBACK),r=[],t=0;t<e.length;t++)r.push(new l.instance(e[t]));return r},o.prototype.getCameras=function(){R.invokeLog("getCameraList");var e=[];e=BRAC_EnumDevices(BRAC_DEVICE_VIDEOCAPTURE),bSupportHtml5&&0==e.length&&e.push("1-Virtual Camera");for(var r=[],t=0;t<e.length;t++){var o="";bSupportHtml5&&(o=parseInt(t+1)+"-"),r.push(new g.instance(o+e[t]))}return r},o.prototype.getRemoteAudioStream=function(e){var r=l.openAudio(h(e.remoteUserId));return R.invokeLog("getRemoteAudioStream",r,e),r},o.prototype.cancelRemoteAudioStream=function(e){var r=l.closeAudio(h(e.remoteUserId));return R.invokeLog("cancelRemoteAudioStream",r,e),r},o.prototype.getRemoteVideoStream=function(e){var r={userId:h(e.remoteUserId),deviceName:"",demoId:e.renderId};e.hasOwnProperty("streamIndex")&&(r.streamIndex=e.streamIndex);var t=g.openVideo(r);return R.invokeLog("getRemoteVideoStream",t,e),t},o.prototype.cancelRemoteVideoStream=function(e){var r={userId:h(e.remoteUserId)};e.hasOwnProperty("streamIndex")&&(r.streamIndex=e.streamIndex);var t=g.closeVideo(r);return R.invokeLog("cancelRemoteVideoStream",t,e),t},o.prototype.startRecord=function(e){"function"==typeof e.done&&this.setCallBack("onRecordDone",e.done,!0);var r=A.instance.start(e),t=JSON.parse(JSON.stringify(e));"function"==typeof t.done&&delete t.done,R.invokeLog("startRecord",r,t)},o.prototype.stopRecord=function(){var e=A.instance.stop();R.invokeLog("stopRecord",e)},o.prototype.insertFileDuringRecord=function(e){var r=A.instance.insertFile(e);R.invokeLog("insertFileDuringRecord",r)},o.prototype.takeSnapShot=function(e){"function"==typeof e.done&&this.setCallBack("onSnapshotDone",e.done,!0);var r=A.instance.snapshot(e),t=JSON.parse(JSON.stringify(e));return"function"==typeof t.done&&delete t.done,R.invokeLog("takeSnapShot",r,t),r},o.prototype.createFileUploadTask=function(e){R.invokeLog("createFileUploadTask"),e.action="upload";var r=new _.instance(e);return"function"==typeof e.done&&this.setCallBack("onFileUploadDone",e.done,!0),"function"==typeof e.onTaskStatusChanged&&this.setCallBack("onTaskStatusChanged",e.onTaskStatusChanged,!1),r},o.prototype.createFileTransferTask=function(e){R.invokeLog("createFileTransferTask"),e.action="upload",e.userId=h(e.userId);var r=new _.instance(e);return"function"==typeof e.done&&this.setCallBack("onFileTransferDone",e.done,!0),"function"==typeof e.onTaskStatusChanged&&this.setCallBack("onTaskStatusChanged",e.onTaskStatusChanged,!1),r},o.prototype.createFileDownloadTask=function(e){R.invokeLog("createFileDownloadTask"),e.action="download";var r=new _.instance(e);return"function"==typeof e.done&&this.setCallBack("onDownloadDone",e.done,!0),"function"==typeof e.onDownloadTaskStatusChanged&&this.setCallBack("onDownloadTaskStatusChanged",e.onDownloadTaskStatusChanged,!1),r.downloadInit(),r},o.prototype.requestVideoCall=function(e){e.userId=h(e.userId);var r=f.instance.request(e);"function"==typeof e.done&&this.setCallBack("onRequestVideoCallDone",e.done,!0);var t=JSON.parse(JSON.stringify(e));"function"==typeof t.done&&delete t.done,R.invokeLog("requestVideoCall",r,t)},o.prototype.acceptVideoCall=function(e){e.userId=h(e.userId);var r=f.instance.accept(e);R.invokeLog("acceptVideoCall",r,e)},o.prototype.rejectVideoCall=function(e){e.userId=h(e.userId);var r=f.instance.reject(e);R.invokeLog("rejectVideoCall",r,e)},o.prototype.hangupVideoCall=function(e){e.userId=h(e.userId);var r=f.instance.hangup(e);R.invokeLog("hangupVideoCall",r,e)},o.prototype.cancelVideoCall=function(e){e.userId=h(e.userId);var r=f.instance.cancel(e);R.invokeLog("cancelVideoCall",r,e)},o.prototype.getAreas=function(e){var r=p.instance.getAreas(e);"function"==typeof e.done&&this.setCallBack("onSyncAreasDone",e.done,!0),R.invokeLog("getAreas",r)},o.prototype.enterArea=function(e){var r=p.instance.inArea(this,e);"function"==typeof e.done&&this.setCallBack("onEnterAreaDone",e.done,!0);var t=JSON.parse(JSON.stringify(e));"function"==typeof t.done&&delete t.done,R.invokeLog("enterArea",r,t)},o.prototype.leaveArea=function(e){var r=p.instance.outArea(this);"function"==typeof e.done&&this.setCallBack("onLeaveAreaDone",e.done,!0),R.invokeLog("leaveArea",r)},o.prototype.enqueue=function(e){var r=C.instance.inQueue(this,e);"function"==typeof e.done&&this.setCallBack("onEnqueueDone",e.done,!0),"function"==typeof e.onProcessChanged&&this.setCallBack("onProcessChanged",e.onProcessChanged,!1),R.invokeLog("enqueue",r,{queueId:e.queueId})},o.prototype.cancelQueuing=function(e){var r=C.instance.outQueue(this);"function"==typeof e.done&&this.setCallBack("onCancelQueuingDone",e.done,!0),R.invokeLog("cancelQueuing",r)},o.prototype.agentServiceCtrl=function(e){var r=p.instance.agentServiceCtrl(this,e);"function"==typeof e.done&&this.setCallBack("onServiceCtrlDone",e.done,!0),"function"==typeof e.onAgentStatusChanged&&this.setCallBack("onAgentStatusChanged",e.onAgentStatusChanged,!1),"function"==typeof e.onAgentServiceInfoNotify&&this.setCallBack("onAgentServiceInfoNotify",e.onAgentServiceInfoNotify,!1),R.invokeLog("agentServiceCtrl",r,{ctrlCode:e.ctrlCode})},o.prototype.getAgentStatus=function(){var e=p.instance.getAgentStatus(this);if(e)var r=0;return R.invokeLog("getAgentStatus",r),e},o.prototype.getQueueTime=function(e){var r=C.instance.getQueueTime(e);return r},o.prototype.getQueueLength=function(e){var r=C.instance.getQueueLength(e);return r},o.prototype.getQueuePos=function(e){var r=C.instance.getQueuePos(e);return r},o.prototype.getAreaQueueUserCount=function(e){var r=p.instance.getAreaQueueUserCount(e);return r},o.prototype.requestShareDesktop=function(e){var r={level:"BRAC",action:"requestShareDesktop",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("requestShareDesktop",o,e)},o.prototype.cancelRequestShareDesktop=function(e){var r={level:"BRAC",action:"cancelRequestShareDesktop",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("cancelRequestShareDesktop",o,e)},o.prototype.acceptShareDesktop=function(e){var r={level:"BRAC",action:"acceptShareDesktop",srcUserId:d.instance.userId,streamIndex:e.streamIndex};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("acceptShareDesktop",o,e)},o.prototype.rejectShareDesktop=function(e){var r={level:"BRAC",action:"rejectShareDesktop",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("rejectShareDesktop",o,e)},o.prototype.cancelShareDesktop=function(e){var r={level:"BRAC",action:"cancelShareDesktop",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("cancelShareDesktop",o,e)},o.prototype.closeShareDesktop=function(e){var r={level:"BRAC",action:"closeShareDesktop",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("closeShareDesktop",o,e)},o.prototype.requestRemoteControl=function(e){var r={level:"BRAC",action:"requestRemoteControl",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("requestRemoteControl",o,e)},o.prototype.cancelRequestRemoteControl=function(e){var r={level:"BRAC",action:"cancelRequestRemoteControl",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("requestRemoteControl",o,e)},o.prototype.acceptRemoteControl=function(e){var r={level:"BRAC",action:"acceptRemoteControl",srcUserId:d.instance.userId,streamIndex:e.streamIndex};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("acceptRemoteControl",o,e)},o.prototype.rejectRemoteControl=function(e){var r={level:"BRAC",action:"rejectRemoteControl",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h);var t=d.instance.transBufferEx(e),o=t>0?0:-1;R.invokeLog("rejectRemoteControl",o,e)},o.prototype.finishRemoteControl=function(e){var r={level:"BRAC",action:"finishRemoteControl",srcUserId:d.instance.userId};e.msg=JSON.stringify(r),e.targetUsers=e.targetUsers.map(h),d.instance.transBufferEx(e);var t=f.instance.finishRemoteControl(e),o=t>0?0:-1;R.invokeLog("finishRemoteControl",o,e)},o.prototype.openRemoteControl=function(e){e.userId=h(e.userId);var r=f.instance.openRemoteControl(e);R.invokeLog("openRemoteControl",r,e)},o.prototype.setSDKOption=function(e){I.instance.setSDKOption(e)},o.prototype.getSDKOptionInt=function(e){return I.instance.getSDKOptionInt(e)},o.prototype.getSDKOptionString=function(e){return I.instance.getSDKOptionString(e)},o.prototype.getStreamInfo=function(e){var r=g.getUserStreamInfo(e);return r},o.prototype.getVersionInfo=function(){return I.instance.getVersionInfo()},o.prototype.getUserState=function(e){e.userId=h(e.userId);var r=I.instance.getState(e);return r},o.prototype.setCallBack=function(e,r,t){this.eventTarget.addEvent(e,r,t)},o.prototype.callbackFunctionRegister=function(e){if("object"==typeof e){var r=[];for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&r.push(t);for(var t in r){var o=r[t];this.setCallBack(o,e[o],!1)}}},o.prototype.callbackFunctionDestroy=function(e){if("object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&"function"==typeof e[r]&&this.eventTarget.removeEvent({type:r})},o.prototype.getInitDone=function(){return this.isInitDone},o.prototype.turnPathToUrl=function(e){var r=BRAC_GetSDKOptionStringEx(BRAC_SO_LOCALPATH2URL,e.path,0);return r},o.prototype.getAgentCount=function(e){var r={};return r.allAgentCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_INFO_AGENTCOUNT),r.idleAgentCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_INFO_IDLEAGENTCOUNT),r},o.prototype.getIntUserId=function(e){return d.getIntUserId(e)},o.prototype.getUserName=function(e){var r=BRAC_GetUserName(e.userId);return""==r&&(r=BRAC_QueryInfoFromServer(ANYCHAT_SERVERQUERY_NAMEBYUSERID,e.userId),""==r&&(r=BRAC_ObjectGetStringValue(ANYCHAT_OBJECT_TYPE_CLIENTUSER,e.userId,ANYCHAT_OBJECT_INFO_NAME))),r},o.prototype.getUserFriends=function(){return S.instance.getUserFriends()},o.prototype.getFriendInfo=function(e){return S.instance.getFriendInfo(e)},o.prototype.getFriendNickName=function(e){return S.instance.getFriendNickName(e)},o.prototype.getFriendIP=function(e){return S.instance.getFriendIP(e)},o.prototype.selectVideoCapture=function(e){BRAC_SelectVideoCapture(BRAC_DEVICE_VIDEOCAPTURE,e.deviceName)},n.prototype.sdkInit=function(e){return this.anychatSDKInstance=new o,c.instance.removeAll(),T.serverIp=e.serverIp?e.serverIp:"demo.anychat.cn",T.serverPort=e.serverPort?e.serverPort:8906,T.appId=e.appId,T.timeStamp=e.timeStamp?e.timeStamp:0,T.nickName=e.nickName,T.userId=e.userId?e.userId:-1,T.strUserId=e.strUserId?e.strUserId:"",T.password=e.password?e.password:"",T.sign=e.sign?e.sign:"",""!=T.sign?n.anychatSDKInstance.isCluster=1:n.anychatSDKInstance.isCluster=e.password?0:1,"object"==typeof e.queueOpt&&(e.queueOpt.hasOwnProperty("role")&&(d.instance.userType=parseInt(e.queueOpt.role),T.role=e.queueOpt.role),e.queueOpt.hasOwnProperty("name")&&(C.instance.name=e.queueOpt.name,T.name=e.queueOpt.name),e.queueOpt.hasOwnProperty("priority")&&(C.instance.priority=e.queueOpt.priority,T.priority=e.queueOpt.priority),e.queueOpt.hasOwnProperty("attribute")&&(C.instance.attribute=e.queueOpt.attribute?e.queueOpt.attribute:"",T.attribute=e.queueOpt.attribute?e.queueOpt.attribute:""),e.queueOpt.hasOwnProperty("isAutoMode")&&(C.instance.isAutoMode=e.queueOpt.isAutoMode,T.isAutoMode=e.queueOpt.isAutoMode)),"object"==typeof e.cameraOpt&&(T.openNativeScreenCamera=e.cameraOpt.openNativeScreenCamera),"object"==typeof e.logOpt&&(T.logSavepath=e.logOpt.logSavepath,T.logFileRule=e.logOpt.logFileRule),d.instance.callbackFunctionRegister(this,e),f.instance.callbackFunctionRegister(this,e),C.instance.callbackFunctionRegister(this,e),S.instance.callbackFunctionRegister(this,e),this.anychatSDKInstance.init(),this.anychatSDKInstance};var n=new n;window.AnyChatWebSDK=n},function(e,r){function t(e,r,o){var n=t.WARN,a=t.writeLogger,s=!1;this.setPrefix=function(e){s="undefined"!=e&&e},this.setLogger=function(e){"undefined"!=e&&(a=e)},this.setLevel=function(e){"undefined"!=e&&"number"==typeof e?n=e:"undefined"!=e&&(n="debug"==e?t.DEBUG:"info"==e?t.INFO:"error"==e?t.ERROR:"fatal"==e?t.FATAL:"warn"==e?t.WARN:t.NONE)},this.getPrefix=function(){return s},this.getLogger=function(){return a},this.getLevel=function(){return n},"undefined"!=e&&this.setLevel(e),"undefined"!=r&&this.setLogger(r),"undefined"!=o&&this.setPrefix(o)}function o(e){this.logObj=new t("debug",t.consoleLogger,e)}t.prototype.debug=function(e){this.getLevel()<=t.DEBUG&&this._log(e,"DEBUG",this)},t.prototype.info=function(e){this.getLevel()<=t.INFO&&this._log(e,"INFO",this)},t.prototype.warn=function(e){this.getLevel()<=t.WARN&&this._log(e,"WARN",this)},t.prototype.error=function(e){this.getLevel()<=t.ERROR&&this._log(e,"ERROR",this)},t.prototype.fatal=function(e){this.getLevel()<=t.FATAL&&this._log(e,"FATAL",this)},t.prototype._log=function(e,r,t){this.getPrefix()?this.getLogger()(this.getPrefix()+" - "+e,r,t):this.getLogger()(e,r,t)},t.DEBUG=1,t.INFO=2,t.WARN=3,t.ERROR=4,t.FATAL=5,t.NONE=6,t.alertLogger=function(e,r){alert(r+" - "+e)},t.writeLogger=function(e,r){document.writeln(r+"&nbsp;-&nbsp;"+e+"<br/>")},t.consoleLogger=function(e,r,o){if(window.console){var n=new Date,a=n.getHours();a<10&&(a="0"+a);var s=n.getMinutes();s<10&&(s="0"+s);var i=n.getSeconds();i<10&&(i="0"+i);var c=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()+" "+a+":"+s+":"+i;window.console.log("Time:"+c+" Level:"+r+" Message:"+e),t.printLogger(e,r,o,c)}},t.printLogger=function(e,r,t,o){if(window.document.getElementById("logger")){var n=window.document.getElementById("logger"),a=document.createElement("font");a.innerHTML=o+"&nbsp;&nbsp;"+e,n.appendChild(a)}},t.popupLogger=function(e,r,t){if(!t.popupBlocker){if(!t._window||!t._window.document){if(t._window=window.open("","logger_popup_window","width=420,height=320,scrollbars=1,status=0,toolbars=0,resizable=1"),!t._window)return t.popupBlocker=!0,void alert("You have a popup window manager blocking the log4js log popup display.\n\nThis must be disabled to properly see logged events.");t._window.document.getElementById("loggerTable")||(t._window.document.writeln("<table width='100%' id='loggerTable'><tr><th align='left'>Time</th><th width='100%' colspan='2' align='left'>Message</th></tr></table>"),t._window.document.close())}var o=t._window.document.getElementById("loggerTable"),n=o.insertRow(-1),a=n.insertCell(-1),s=n.insertCell(-1),i=n.insertCell(-1),c=new Date,d=c.getHours();d<10&&(d="0"+d);var C=c.getMinutes();C<10&&(C="0"+C);var u=c.getSeconds();u<10&&(u="0"+u);var l=c.getMonth()+1+"/"+c.getDate()+"/"+c.getFullYear()+"&nbsp;-&nbsp;"+d+":"+C+":"+u;a.style.fontSize="8pt",a.style.fontWeight="bold",a.style.paddingRight="6px",s.style.fontSize="8pt",i.style.fontSize="8pt",i.style.whiteSpace="nowrap",i.style.width="100%",o.rows.length%2==0&&(a.style.backgroundColor="#eeeeee",s.style.backgroundColor="#eeeeee",i.style.backgroundColor="#eeeeee"),a.innerHTML=l,s.innerHTML=r,i.innerHTML=e}},t.dumpObject=function(e,r){if(r||(r=""),!(r.length>20)){var o="{\n";for(var n in e){o+=r+n+":";var a=typeof e[n];a=a.toLowerCase(),o+="object"==a?t.dumpObject(e[n],r+"----"):e[n],o+="\n"}return o+=r+"}"}},o.prototype={constructor:o,invokeLog:function(e,r,t){var o="";if(t){var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);o="(";for(var a in n){var s=n[a];o+=a==n.length-1?" "+s+":"+t[s]+" )":" "+s+":"+t[s]+","}}var i="invoke AnyChatSDKInstance "+e+o,c="";r>=0?(c=r,i+="="+c):i+="...",this.logObj.debug(i)},callbackLog:function(e,r,t){var o="";if(t){var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(a);o="(";for(var a in n){var s=n[a];o+=a==n.length-1?" "+s+":"+t[s]+" )":" "+s+":"+t[s]+","}}var i="callback AnyChatSDKInstance "+e,c="";r>=0?(c=r,i+=", errorCode:"+c):i+="...",this.logObj.debug(i)}};new o;r.getLogger=function(e){return new o(e)}},function(e,r){function t(){}t.prototype={constructor:t,ConnectStatus:{ERROR:-1,INIT:0,INITIALIZED:1,OPEN:2,OFFLINE:3,OPENING:4},ErrorType:{CONNECT_ERROR:1,LOGIN_ERROR:2}};var o=new t;r.instance=o},function(e,r){function t(){this.handlers={},this.doneHandlers=[]}t.prototype={constructor:t,addEvent:function(e,r,t){"undefined"==typeof this.handlers[e]?(this.handlers[e]=[],this.handlers[e].push(r)):t?this.handlers[e].push(r):(this.handlers[e].length=0,this.handlers[e].push(r)),t&&this.doneHandlers.push(e)},fireEvent:function(e){if(e.target||(e.target=this),this.handlers[e.type]instanceof Array){for(var r=this.handlers[e.type],t=0;t<r.length;t++){var o=[];for(var n in e)"type"!=n&&o.push(e[n]);r[t].apply(null,o)}for(var a=0;a<this.doneHandlers.length;a++)if(e.type==this.doneHandlers[a]){this.removeEvent(e),this.doneHandlers.splice(a,1);break}}},removeEvent:function(e){e.target||(e.target=this),this.handlers[e.type]instanceof Array&&delete this.handlers[e.type]},removeAll:function(){this.handlers={},this.doneHandlers=[]}};var o=new t;r.instance=o},function(e,r,t){function o(){this.atRoomUserList=[],this.userType=-1,this.userId=-1,this.strUserId="",this.isSupportEx=!0,this.currentMsgTaskId=[]}function n(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var r,t,o,n,a,s,i,c="",d=0;for(e=_utf8_encode(e);d<e.length;)r=e.charCodeAt(d++),t=e.charCodeAt(d++),o=e.charCodeAt(d++),n=r>>2,a=(3&r)<<4|t>>4,s=(15&t)<<2|o>>6,i=63&o,isNaN(t)?s=i=64:isNaN(o)&&(i=64),c=c+_keyStr.charAt(n)+_keyStr.charAt(a)+_keyStr.charAt(s)+_keyStr.charAt(i);return c},this.decode=function(e){var r,t,o,n,a,s,i,c="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=_keyStr.indexOf(e.charAt(d++)),a=_keyStr.indexOf(e.charAt(d++)),s=_keyStr.indexOf(e.charAt(d++)),i=_keyStr.indexOf(e.charAt(d++)),r=n<<2|a>>4,t=(15&a)<<4|s>>2,o=(3&s)<<6|i,c+=String.fromCharCode(r),64!=s&&(c+=String.fromCharCode(t)),64!=i&&(c+=String.fromCharCode(o));return c=_utf8_decode(c)},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var r="",t=0;t<e.length;t++){var o=e.charCodeAt(t);o<128?r+=String.fromCharCode(o):o>127&&o<2048?(r+=String.fromCharCode(o>>6|192),r+=String.fromCharCode(63&o|128)):(r+=String.fromCharCode(o>>12|224),r+=String.fromCharCode(o>>6&63|128),r+=String.fromCharCode(63&o|128))}return r},_utf8_decode=function(e){for(var r="",t=0,o=c1=c2=0;t<e.length;)o=e.charCodeAt(t),o<128?(r+=String.fromCharCode(o),t++):o>191&&o<224?(c2=e.charCodeAt(t+1),r+=String.fromCharCode((31&o)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),r+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),t+=3);return r}}function a(e){return e}function s(e){return e}function i(e){for(var r=0;r<l.currentMsgTaskId.length;r++)if(l.currentMsgTaskId[r].msgId==e){var t=l.currentMsgTaskId[r].msgContent,o=l.currentMsgTaskId[r].targetId,n={userId:o,msg:t};AnyChatWebSDK.anychatSDKInstance.eventTarget.fireEvent({type:"onTransBufferDone",result:{code:-1,msg:"发送失败"},data:n}),l.currentMsgTaskId.slice(r,1);break}}var c=t(1),d=(c.getLogger("AnyChatSDKUserHandler"),t(2)),C=(t(5),t(6)),u=d.instance;o.prototype={constructor:o,login:function(e){var r=-1;return r=AnyChatWebSDK.anychatSDKInstance.isCluster?BRAC_LoginEx(e.nickName,-1,e.strUserId,e.appId,e.timeStamp,"",""):BRAC_Login(e.nickName,e.password,0),this.strUserId=e.strUserId,r},logout:function(e){var r=e;if(r.curConnectStatus!=u.ConnectStatus.OFFLINE){var t=BRAC_Logout();return 0==t&&(r.curConnectStatus==u.ConnectStatus.INITIALIZED,C.instance.areaIdArray=[],C.instance.areaIdIndex=0),t}},enterRoom:function(e){var r="";if(e.hasOwnProperty("password")&&(r=e.password),bSupportHtml5)return BRAC_EnterRoom(e.roomId,r,0);var t=/^[1-9]+[0-9]*]*$/;return t.test(e.roomId)?BRAC_EnterRoom(parseInt(e.roomId),r,0):BRAC_EnterRoomEx(e.roomId+"",r)},getRoomUsers:function(){this.atRoomUserList=[];var e=BRAC_GetOnlineUser();e.push(this.userId);for(var r=e.map(s),t=0;t<r.length;t++)this.atRoomUserList[t]={intUserId:e[t],strUserId:r[t]};return r},leaveRoom:function(e){var r=e;if(r.curConnectStatus!=u.ConnectStatus.OFFLINE){var t=BRAC_LeaveRoom(-1);return t}},controlLocalVideo:function(e,r){},requestOtherUserVideo:function(e,r){},sendMsg:function(e){if(!e.hasOwnProperty("targetUsers"))return BRAC_SendTextMessage(-1,0,e.msg);if(0==e.targetUsers.length)return BRAC_SendTextMessage(-1,0,e.msg);for(var r in e.targetUsers)return BRAC_SendTextMessage(e.targetUsers[r],1,e.msg)},transBufferEx:function(e){if(!e.hasOwnProperty("targetUsers"))return BRAC_TransBufferEx(-1,g.encode(e.msg),0,0,0);if(0==e.targetUsers.length)return 21;for(var r=0;r<e.targetUsers.length;r++){var t=(new Date).getTime(),o=e.msg;e.msg=t+"#"+o;var n=setTimeout(function(){i(t)},1e3*(e.time?e.time:10)),a={msgId:t,targetId:e.targetUsers[r],msgContent:o,timer:n};return this.currentMsgTaskId.push(a),BRAC_TransBufferEx(e.targetUsers[r],g.encode(e.msg),0,0,0)}}},o.prototype.callbackFunctionRegister=function(e,r){"function"==typeof r.onDisConnect&&e.anychatSDKInstance.setCallBack("onDisConnect",r.onDisConnect,!1),r.onUpdateUserInfo&&e.anychatSDKInstance.setCallBack("onUpdateUserInfo",r.onUpdateUserInfo,!1),r.onLogin&&e.anychatSDKInstance.setCallBack("onLogin",r.onLogin,!1),"object"==typeof r.bufferOpt&&"function"==typeof r.bufferOpt.onReceiveBuffer&&e.anychatSDKInstance.setCallBack("onReceiveBuffer",r.bufferOpt.onReceiveBuffer,!1),"object"==typeof r.roomOpt&&("function"==typeof r.roomOpt.onRoomUserInAndOut&&e.anychatSDKInstance.setCallBack("onRoomUserInAndOut",r.roomOpt.onRoomUserInAndOut,!1),"function"==typeof r.roomOpt.onRoomUserChanged&&e.anychatSDKInstance.setCallBack("onRoomUserChanged",r.roomOpt.onRoomUserChanged,!1),"function"==typeof r.roomOpt.onRoomUserMsgReceived&&e.anychatSDKInstance.setCallBack("onRoomUserMsgReceived",r.roomOpt.onRoomUserMsgReceived,!1)),"object"==typeof r.fileOpt&&"function"==typeof r.fileOpt.onFileReceived&&e.anychatSDKInstance.setCallBack("onFileReceived",r.fileOpt.onFileReceived,!1)};var l=new o,g=new n;r.instance=l,r.Base64=g,r.getStrUserId=s,r.getIntUserId=a},function(e,r){function t(e){if(En)return En.get(e);for(var r in o)if(o[r].errorCode==e)return o[r].errorMsg}var o=[],n={errorCode:-1,errorMsg:"未知错误"},a={errorCode:0,errorMsg:"成功"},s={errorCode:1,errorMsg:"数据库错误"},i={errorCode:2,errorMsg:"系统没有初始化"},c={errorCode:3,errorMsg:"还未进入房间"},d={errorCode:4,errorMsg:"not enough memory"},C={errorCode:5,errorMsg:"出现异常"},u={errorCode:6,errorMsg:"操作被取消"},l={errorCode:7,errorMsg:"通信协议出错"},g={errorCode:8,errorMsg:"会话不存在"},A={errorCode:9,errorMsg:"数据不存在"},_={errorCode:10,errorMsg:"数据已经存在"},f={errorCode:11,errorMsg:"无效GUID"},p={errorCode:12,errorMsg:"资源被回收"},E={errorCode:13,errorMsg:"资源被占用"},I={errorCode:14,errorMsg:"Json解析出错"},S={errorCode:15,errorMsg:"对象被删除"},R={errorCode:16,errorMsg:"会话已存在"},T={errorCode:17,errorMsg:"会话没有初始化"},h={errorCode:20,errorMsg:"函数功能不允许"},O={errorCode:21,errorMsg:"function parameters error"},v={errorCode:22,errorMsg:"device open failed or device no install"},m={errorCode:23,errorMsg:"没有足够的资源"},y={errorCode:24,errorMsg:"指定的格式不能被显示设备所支持"},N={errorCode:25,errorMsg:"指定的IP地址不是有效的组播地址"},B={errorCode:26,errorMsg:"不支持多实例运行"},D={errorCode:27,errorMsg:"文件签名验证失败"},M={errorCode:28,errorMsg:"授权验证失败"},L={errorCode:29,errorMsg:"授权证书用户数验证失败"},U={errorCode:30,errorMsg:"所指定的主服务器是热备服务器，不支持再次热备"},k={errorCode:31,errorMsg:"主服务器没有经过授权认证，不支持热备"},b={errorCode:32,errorMsg:"版本不匹配"},P={errorCode:33,errorMsg:"第二次授权验证失败"},V={errorCode:34,errorMsg:"服务器安全验证失败"},Y={errorCode:35,errorMsg:"客户端授权验证失败"},H={errorCode:36,errorMsg:"授权功能校验失败"},F={errorCode:37,errorMsg:"远程控制"},G={errorCode:38,errorMsg:"ServiceGuid重复"},w={errorCode:39,errorMsg:"目录错误"},K={errorCode:40,errorMsg:"解压文件失败"},x={errorCode:41,errorMsg:"启动进程失败"},j={errorCode:42,errorMsg:"服务已启动"},J={errorCode:43,errorMsg:"磁盘空间不足"},Q={errorCode:44,errorMsg:"业务服务发送请求失败"},q={errorCode:45,errorMsg:"无效的物理机对象"},W={errorCode:46,errorMsg:"获取授权信息失败"},X={errorCode:47,errorMsg:"集群属性不匹配"},z={errorCode:48,errorMsg:"集群ID为空"},Z={errorCode:49,errorMsg:"同台物理机创建多个相同服务，一类服务暂时不允许创建多个"},$={errorCode:50,errorMsg:"拷贝文件失败"},ee={errorCode:51,errorMsg:"云平台内部数据库出错"},re={errorCode:52,errorMsg:"云平台OSS文件上传失败"},te={errorCode:53,errorMsg:"服务绑定关系变化"},oe={errorCode:54,errorMsg:"服务没有被绑定"},ne={errorCode:55,errorMsg:"服务绑定失败"},ae={errorCode:56,errorMsg:"PipeLine通信用户ID出错"},se={errorCode:57,errorMsg:"PipeLine通信会话出错"},ie={errorCode:58,errorMsg:"服务被关闭"},ce={errorCode:59,errorMsg:"文件已被加密过"},de={errorCode:60,errorMsg:"解密无效（文件校验不通过）"},Ce={errorCode:61,errorMsg:"解密失败，可能密码错误"},ue={errorCode:100,errorMsg:"连接服务器超时"},le={errorCode:101,errorMsg:"与服务器的连接中断"},ge={errorCode:102,errorMsg:"连接服务器认证失败（服务器设置了认证密码）"},Ae={errorCode:103,errorMsg:"域名解析失败"},_e={errorCode:104,errorMsg:"超过授权用户数"},fe={errorCode:105,errorMsg:"服务器功能受限制（演示模式）"},pe={errorCode:106,errorMsg:"只能在内网使用"},Ee={errorCode:107,errorMsg:"版本太旧，不允许连接"},Ie={errorCode:108,errorMsg:"Socket出错"},Se={errorCode:109,errorMsg:"设备连接限制（没有授权）"},Re={errorCode:110,errorMsg:"服务已被暂停"},Te={errorCode:111,errorMsg:"热备服务器不支持连接（主服务在启动状态）"},he={errorCode:112,errorMsg:"授权用户数校验出错，可能内存被修改"},Oe={errorCode:113,errorMsg:"IP被禁止连接"},ve={errorCode:114,errorMsg:"连接类型错误，服务器不支持当前类型的连接"},me={errorCode:115,errorMsg:"服务器IP地址不正确"},ye={errorCode:116,errorMsg:"连接被主动关闭"},Ne={errorCode:117,errorMsg:"没有获取到服务器列表"},Be={errorCode:118,errorMsg:"连接负载均衡服务器超时"},De={errorCode:119,errorMsg:"服务器不在工作状态"},Me={errorCode:120,errorMsg:"服务器不在线"},Le={errorCode:121,errorMsg:"网络带宽受限"},Ue={errorCode:122,errorMsg:"网络流量不足"},ke={errorCode:123,errorMsg:"不支持IPv6 Only网络"},be={errorCode:124,errorMsg:"没有Master服务器在线"},Pe={errorCode:125,errorMsg:"没有上报工作状态"},Ve={errorCode:200,errorMsg:"认证失败，用户名或密码有误"},Ye={errorCode:201,errorMsg:"该用户已登录"},He={errorCode:202,errorMsg:"帐户已被暂时锁定"},Fe={errorCode:203,errorMsg:"IP地址已被暂时锁定"},Ge={errorCode:204,errorMsg:"游客登录被禁止（登录时没有输入密码）"},we={errorCode:205,errorMsg:"无效的用户ID（用户不存在）"},Ke={errorCode:206,errorMsg:"与业务服务器连接失败，认证功能失效"},xe={errorCode:207,errorMsg:"业务服务器执行任务超时"},je={errorCode:208,errorMsg:"没有登录"},Je={errorCode:209,errorMsg:"该用户在其它计算机上登录"},Qe={errorCode:210,errorMsg:"用户名为空"},qe={errorCode:211,errorMsg:"被服务器踢掉"},We={errorCode:212,errorMsg:"业务服务器重启"},Xe={errorCode:213,errorMsg:"操作被禁止，没有权限"},ze={errorCode:214,errorMsg:"签名信息为空，禁止登录"},Ze={errorCode:215,errorMsg:"签名验证失败"},$e={errorCode:216,errorMsg:"签名验证公钥为空"},er={errorCode:217,errorMsg:"签名私钥为空"},rr={errorCode:218,errorMsg:"签名参数为空"},tr={errorCode:219,errorMsg:"签名参数出错"},or={errorCode:220,errorMsg:"签名时间失效"},nr={errorCode:221,errorMsg:"应用没有被激活"},ar={errorCode:222,errorMsg:"应用被用户暂停"},sr={errorCode:223,errorMsg:"应用被用户锁定"},ir={errorCode:224,errorMsg:"应用已过期"},cr={errorCode:225,errorMsg:"应用未知状态"},dr={errorCode:226,errorMsg:"签名已经被使用"},Cr={errorCode:227,errorMsg:"获取用户角色失败"},ur={errorCode:228,errorMsg:"坐席无效(不存在)"},lr={errorCode:300,errorMsg:"房间已被锁住，禁止进入"},gr={errorCode:301,errorMsg:"房间密码错误，禁止进入"},Ar={errorCode:302,errorMsg:"房间已满员，不能进入"},_r={errorCode:303,errorMsg:"房间不存在"},fr={errorCode:304,errorMsg:"房间服务时间已到期"},pr={errorCode:305,errorMsg:"房主拒绝进入"},Er={errorCode:306,errorMsg:"房主不在，不能进入房间"},Ir={errorCode:307,errorMsg:"不能进入房间"},Sr={errorCode:308,errorMsg:"已经在房间里面了，本次进入房间请求忽略"},Rr={errorCode:309,errorMsg:"不在房间中，对房间相关的API操作失败"},Tr={errorCode:350,errorMsg:"过期数据包"},hr={errorCode:351,errorMsg:"相同的数据包"},Or={errorCode:352,errorMsg:"数据包丢失"},vr={errorCode:353,errorMsg:"数据包出错，帧序号存在误差"},mr={errorCode:354,errorMsg:"媒体流缓冲时间不足"},yr={errorCode:401,errorMsg:"用户已经离开房间"},Nr={errorCode:402,errorMsg:"用户拒绝了私聊邀请"},Br={errorCode:403,errorMsg:"不允许与该用户私聊，或是用户禁止私聊"},Dr={errorCode:420,errorMsg:"私聊请求ID号错误，或请求不存在"},Mr={errorCode:421,errorMsg:"已经在私聊列表中"},Lr={errorCode:431,errorMsg:"私聊请求超时"},Ur={errorCode:432,errorMsg:"对方正在私聊中，繁忙状态"},kr={errorCode:433,errorMsg:"对方用户关闭私聊"},br={errorCode:434,errorMsg:"用户自己关闭私聊"},Pr={errorCode:435,errorMsg:"私聊请求被取消"},Vr={errorCode:440,errorMsg:"正在通话中"},Yr={errorCode:500,errorMsg:"说话时间太长，请休息一下"},Hr={errorCode:501,errorMsg:"有高级别用户需要发言，请休息一下"},Fr={errorCode:610,errorMsg:"本地总线为Master状态"},Gr={errorCode:611,errorMsg:"有其它总线存在"},wr={errorCode:612,
errorMsg:"优先级不够"},Kr={errorCode:700,errorMsg:"创建任务失败"},xr={errorCode:701,errorMsg:"没有该任务，或是任务已完成"},jr={errorCode:710,errorMsg:"打开文件出错"},Jr={errorCode:711,errorMsg:"文件长度为0"},Qr={errorCode:712,errorMsg:"文件长度太大"},qr={errorCode:713,errorMsg:"读文件出错"},Wr={errorCode:714,errorMsg:"文件正在下载中"},Xr={errorCode:715,errorMsg:"文件下载失败"},zr={errorCode:716,errorMsg:"没有该任务，或是任务已完成"},Zr={errorCode:720,errorMsg:"没有录像任务"},$r={errorCode:721,errorMsg:"创建录像任务失败"},et={errorCode:722,errorMsg:"等待用户相关信息，暂时不能录像"},rt={errorCode:750,errorMsg:"无效的队列ID"},tt={errorCode:751,errorMsg:"准备接受服务，离开队列"},ot={errorCode:780,errorMsg:"与服务器的UDP通信异常，流媒体服务将不能正常工作"},nt={errorCode:781,errorMsg:"SDK加载brMiscUtil.dll动态库失败，部分功能将失效"},at={errorCode:782,errorMsg:"SDK加载brMediaUtil.dll动态库失败，部分功能将失效"},st={errorCode:783,errorMsg:"SDK加载brMediaCore.dll动态库失败，部分功能将失效"},it={errorCode:784,errorMsg:"SDK加载brMediaShow.dll动态库失败，部分功能将失效"},ct={errorCode:10001,errorMsg:"Open video device fail"},dt={errorCode:10002,errorMsg:"Unknow output video pix format"},Ct={errorCode:10003,errorMsg:"Driver Not supported VIDIOC_G_FMT"},ut={errorCode:10004,errorMsg:"Driver Not supported VIDIOC_S_FMT"},lt={errorCode:10005,errorMsg:"Driver Not supported VIDIOC_G_PARM"},gt={errorCode:10006,errorMsg:"Driver Not supported VIDIOC_S_PARM"},At={errorCode:10007,errorMsg:"Driver Not supported VIDIOC_QUERYCAP"},_t={errorCode:10008,errorMsg:"This is not a capture video device"},ft={errorCode:10009,errorMsg:"For acquisition error"},pt={errorCode:10010,errorMsg:"Device Not supported for mmap and usermap mode"},Et={errorCode:10011,errorMsg:"get physaddr to block fail"},It={errorCode:10012,errorMsg:"physaddr map to viraddr fail"},St={errorCode:10013,errorMsg:"QBUF fail"},Rt={errorCode:10013,errorMsg:"video prepbuff fail"},Tt={errorCode:10014,errorMsg:"get video fail"},ht={errorCode:10015,errorMsg:"QBUF fail"},Ot={errorCode:10016,errorMsg:"VIDIOC_STREAMON fail"},vt={errorCode:10017,errorMsg:"VIDIOC_STREAMOFF fail"},mt={errorCode:10018,errorMsg:"May be camera is used by other progress now"},yt={errorCode:10019,errorMsg:"unsupport video capture mode"},Nt={errorCode:10020,errorMsg:"the requested buffer type not supported, or VIDIOC_TRY_FMT was called and is not supported with this buffer type."},Bt={errorCode:10500,errorMsg:"Open Audio device fail"},Dt={errorCode:10501,errorMsg:"alloc hwparams fail"},Mt={errorCode:10502,errorMsg:"set interleaved mode fail"},Lt={errorCode:10503,errorMsg:"set wBitsPerSample  fail"},Ut={errorCode:10504,errorMsg:"set SamplesPerSec   fail"},kt={errorCode:10505,errorMsg:"set channels fail"},bt={errorCode:10506,errorMsg:"set periods  fail"},Pt={errorCode:10507,errorMsg:"set buffer size fail"},Vt={errorCode:10508,errorMsg:"function :snd_pcm_hw_params fail"},Yt={errorCode:10509,errorMsg:"set rebuffer time fail"},Ht={errorCode:10510,errorMsg:"get rebuffer frames fail"},Ft={errorCode:10511,errorMsg:"get period time fail"},Gt={errorCode:10512,errorMsg:"get period time fail"},wt={errorCode:10513,errorMsg:"alloc swparams fail"},Kt={errorCode:10514,errorMsg:"set start threshoid fail"},xt={errorCode:10515,errorMsg:"set start avail min fail"},jt={errorCode:10516,errorMsg:"function snd_pcm_prepare fail"},Jt={errorCode:10517,errorMsg:"function read fail"},Qt={errorCode:10518,errorMsg:"音频capmode出错"},qt={errorCode:2e4,errorMsg:"无效的流"},Wt={errorCode:3e4,errorMsg:"创建会话失败"},Xt={errorCode:101e4,errorMsg:"插件没有安装"},zt={errorCode:1010001,errorMsg:"插件版本太低"},Zt={errorCode:100101,errorMsg:"源用户主动放弃会话"},$t={errorCode:100102,errorMsg:"目标用户不在线"},eo={errorCode:100103,errorMsg:"目标用户忙"},ro={errorCode:100104,errorMsg:"目标用户拒绝会话"},to={errorCode:100105,errorMsg:"会话请求超时"},oo={errorCode:100106,errorMsg:"网络断线"},no={errorCode:100107,errorMsg:"用户不在呼叫状态"},ao={errorCode:100201,errorMsg:"已经进入一个服务区域"},so={errorCode:100202,errorMsg:"已经进入一个服务队列"},io={errorCode:100300,errorMsg:"默认的应用ID（空）不被支持"},co={errorCode:100301,errorMsg:"应用登录需要签名"},Co={errorCode:100302,errorMsg:"应用签名校验失败"},uo={errorCode:100303,errorMsg:"应用ID不存在"},lo={errorCode:100304,errorMsg:"应用ID被系统锁定"},go={errorCode:100305,errorMsg:"应用ID与当前服务不匹配"},Ao={errorCode:100306,errorMsg:"连接的服务器不是云平台地址"},_o={errorCode:100307,errorMsg:"应用所对应的计费服务器不足"},fo={errorCode:100308,errorMsg:"应用计费模式改变"},po={errorCode:100400,errorMsg:"用户密码长度过短"},Eo={errorCode:100401,errorMsg:"用户名重名"},Io={errorCode:100402,errorMsg:"权限受限"},So={errorCode:100403,errorMsg:"不允许创建该用户名"},Ro={errorCode:100500,errorMsg:"升级服务开始"},To={errorCode:100501,errorMsg:"升级服务，正在停止当前服务..."},ho={errorCode:100502,errorMsg:"升级服务，正在备份当前服务..."},Oo={errorCode:100503,errorMsg:"升级服务，正在删除当前服务..."},vo={errorCode:100504,errorMsg:"升级服务，正在拷贝新服务..."},mo={errorCode:100505,errorMsg:"升级服务，正在启动新服务..."},yo={errorCode:100506,errorMsg:"升级服务，正在恢复老版本..."},No={errorCode:100507,errorMsg:"升级服务，已经是目标版本"},Bo={errorCode:100508,errorMsg:"升级服务，当前服务需要停止，才能执行升级操作"},Do={errorCode:100509,errorMsg:"升级服务，备份失败"},Mo={errorCode:100510,errorMsg:"升级服务，删除失败"},Lo={errorCode:100511,errorMsg:"升级服务，拷贝失败"},Uo={errorCode:100512,errorMsg:"升级服务，恢复老版本失败"},ko={errorCode:100513,errorMsg:"升级服务，通讯桥未注册"},bo={errorCode:100514,errorMsg:"升级服务，写入配置文件失败"},Po={errorCode:100515,errorMsg:"升级服务，获取备份文件夹失败"},Vo={errorCode:100516,errorMsg:"升级服务结束"},Yo={errorCode:100517,errorMsg:"无法获取维护信息"},Ho={errorCode:100518,errorMsg:"不能重命名文件夹"},Fo={errorCode:100600,errorMsg:"停止进程，超时"},Go={errorCode:100601,errorMsg:"停止进程，失败(被回复失败)"},wo={errorCode:100602,errorMsg:"停止进程，强行杀死失败"},Ko={errorCode:100603,errorMsg:"启动进程,规定时间内没有收到通讯桥通知"},xo={errorCode:100604,errorMsg:"service 正在被控制中(e.g 正在执行升级任务的时候，还收到了其他控制命令)"},jo={errorCode:100605,errorMsg:"在启动或解压之前，发现除目标之外还存在其他版本"},Jo={errorCode:100606,errorMsg:"不支持此操作（e.g 对PMServer下达挂起命令等 ）"},Qo={errorCode:100607,errorMsg:"不存在该版本的升级包"},qo={errorCode:100608,errorMsg:"升级包中不存在该服务"},Wo={errorCode:100609,errorMsg:"扩展的配置参数非法（e.g LUServer 的 serviceBaseInfo 的扩展参数解析错误）"},Xo={errorCode:100610,errorMsg:"移动临时文件到升级目录时失败"},zo={errorCode:100611,errorMsg:"不兼容当前OS平台"},Zo={errorCode:100612,errorMsg:"获取 rtserverconnect 失败"},$o={errorCode:100701,errorMsg:"无效参数"},en={errorCode:100702,errorMsg:"应用ID不存在"},rn={errorCode:100703,errorMsg:"Body无效"},tn={errorCode:100704,errorMsg:"签名验证失败"},on={errorCode:100705,errorMsg:"签名时间戳无效"},nn={errorCode:100706,errorMsg:"not enough memory"},an={errorCode:100707,errorMsg:"出现异常"},sn={errorCode:100708,errorMsg:"通信协议出错"},cn={errorCode:100709,errorMsg:"业务服务器执行任务超时"},dn={errorCode:100710,errorMsg:"文件不存在"},Cn={errorCode:100801,errorMsg:"数据库执行错误"},un={errorCode:100802,errorMsg:"数据库查询不到数据"},ln={errorCode:100803,errorMsg:"数据库读取行数据错误"},gn={errorCode:100804,errorMsg:"出现异常"},An={errorCode:100805,errorMsg:"连接异常"},_n={errorCode:100901,errorMsg:"无效URL地址"},fn={errorCode:100902,errorMsg:"页面不存在"},pn={errorCode:100903,errorMsg:"主机或代理失败"};o=[n,a,s,i,c,d,C,u,l,g,A,_,f,p,E,I,S,R,T,h,O,v,m,y,N,B,D,M,L,U,k,b,P,V,Y,H,F,G,w,K,x,j,J,Q,q,W,X,z,Z,$,ee,re,te,oe,ne,ae,se,ie,ce,de,Ce,ue,le,ge,Ae,_e,fe,pe,Ee,Ie,Se,Re,Te,he,Oe,ve,me,ye,Ne,Be,De,Me,Le,Ue,ke,be,Pe,Ve,Ye,He,Fe,Ge,we,Ke,xe,je,Je,Qe,qe,We,Xe,ze,Ze,$e,er,rr,tr,or,nr,ar,sr,ir,cr,dr,Cr,ur,lr,gr,Ar,_r,fr,pr,Er,Ir,Sr,Rr,Tr,hr,Or,vr,mr,yr,Nr,Br,Dr,Mr,Lr,Ur,kr,br,Pr,Vr,Yr,Hr,Fr,Gr,wr,Kr,xr,jr,Jr,Qr,qr,Wr,Xr,zr,Zr,$r,et,rt,tt,ot,nt,at,st,it,ct,dt,Ct,ut,lt,gt,At,_t,ft,pt,Et,It,St,Rt,Tt,ht,Ot,vt,mt,yt,Nt,Bt,Dt,Mt,Lt,Ut,kt,bt,Pt,Vt,Yt,Ht,Ft,Gt,wt,Kt,xt,jt,Jt,Qt,qt,Wt,Xt,zt,Zt,$t,eo,ro,to,oo,no,ao,so,io,co,Co,uo,lo,go,Ao,_o,fo,po,Eo,Io,So,Ro,To,ho,Oo,vo,mo,yo,No,Bo,Do,Mo,Lo,Uo,ko,bo,Po,Vo,Yo,Ho,Fo,Go,wo,Ko,xo,jo,Jo,Qo,qo,Wo,Xo,zo,Zo,$o,en,rn,tn,on,nn,an,sn,cn,dn,Cn,un,ln,gn,An,_n,fn,pn];var En;try{En=new Map;for(var In in o)En.set(o[In].errorCode,o[In].errorMsg)}catch(e){}r.checkErrorMsg=t},function(e,r,t){function o(){this.agentStatus=0,this.currentAgentID,this.areaId,this.areaIdArray=[],this.areaIdIndex=0}function n(e){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AREA,ANYCHAT_INVALID_OBJECT_ID,ANYCHAT_OBJECT_CTRL_SYNCDATA,e.userId,0,0,0,"");return r}function a(e){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_CTRL_USERENTER,0,0,0,0,"");return r}function s(e){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_CTRL_USERLEAVE,0,0,0,0,"");return r}function i(e){var r=BRAC_ObjectGetStringValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_OBJECT_INFO_NAME);return r}function c(e){var r=BRAC_ObjectGetStringValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_OBJECT_INFO_DESCRIPTION);return r}function d(e){if(1==S.instance.isAutoMode){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AGENT,e.userId,ANYCHAT_AGENT_CTRL_SERVICESTATUS,e.ctrlCode,0,0,0,"");return r}if(1==e.ctrlCode){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AGENT,e.userId,ANYCHAT_AGENT_CTRL_SERVICEREQUEST,0,0,0,0,"");return r}if(0==e.ctrlCode){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AGENT,e.userId,ANYCHAT_AGENT_CTRL_FINISHSERVICE,0,0,0,0,"");return r}}function C(e){var r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AGENT,e.userId,ANYCHAT_AGENT_INFO_SERVICETOTALNUM);return r}function u(e){var r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AGENT,e.userId,ANYCHAT_AGENT_INFO_SERVICEBEGINTIME);return r}function l(e){var r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AGENT,e.userId,ANYCHAT_AGENT_INFO_SERVICETOTALTIME);return r}function g(e){return BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_INFO_AGENTCOUNT)}function A(e){return BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_INFO_IDLEAGENTCOUNT)}function _(e){return BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,e.areaId,ANYCHAT_AREA_INFO_QUEUEUSERCOUNT)}var f=t(1),p=(f.getLogger("AnyChatSDKAreaHandler"),t(2)),E=t(5),I=t(4),S=t(7),R=p.instance;o.prototype={constructor:o,inArea:function(e,r){var t=e;if(t.curConnectStatus!=R.ConnectStatus.OFFLINE){var o=a({areaId:r.areaId});return 0==o&&(this.areaId=r.areaId),o}},outArea:function(e){var r=e;if(r.curConnectStatus!=R.ConnectStatus.OFFLINE){var t=s({areaId:this.areaId});return 0==t&&(this.areaId=""),t}},getAreas:function(){return n({userId:I.instance.userId})},agentServiceCtrl:function(e,r){var t=e;if(t.curConnectStatus!=R.ConnectStatus.OFFLINE){var o=0;switch(r.ctrlCode){case 0:o=1;break;case 1:o=0;break;case 2:o=3}var n=d({userId:I.instance.userId,ctrlCode:o}),a={code:n,msg:E.checkErrorMsg(n)};return t.eventTarget.fireEvent({type:"onServiceCtrlDone",result:a}),n}},getAgentStatus:function(){var e={};return e.serviceUserCount=C({userId:I.instance.userId}),e.serviceBeginTime=u({userId:I.instance.userId}),e.serviceTotalTime=l({userId:I.instance.userId}),e},getAgentCount:function(e){return g(e)},getIdleAgentCount:function(e){return A(e)},getAreaQueueUserCount:function(e){return _(e)}};var T=new o;r.instance=T,r.getAreaName=i,r.getAreaDescription=c},function(e,r,t){function o(){this.isAutoMode=1,this.name,this.priority=5,this.attribute=-1,this.currentQueueId="",this.waitingTimer}function n(e){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_QUEUE,e.queueId,ANYCHAT_QUEUE_CTRL_USERENTER,0,0,0,0,"");return r}function a(e){var r=BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_QUEUE,e.queueId,ANYCHAT_QUEUE_CTRL_USERLEAVE,0,0,0,0,"");return r}function s(e){var r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,e.queueId,ANYCHAT_QUEUE_INFO_LENGTH);return r}function i(e){var r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,e.queueId,ANYCHAT_QUEUE_INFO_BEFOREUSERNUM);return r=r<0?0:r,r++}function c(e){var r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,e.queueId,ANYCHAT_QUEUE_INFO_WAITTIMESECOND);return r}var d=t(1),C=(d.getLogger("AnyChatSDKQueueHandler"),t(2)),u=C.instance;o.prototype={constructor:o,inQueue:function(e,r){var t=e;if(t.curConnectStatus!=u.ConnectStatus.OFFLINE){var o=n({queueId:r.queueId});return 0==o&&(this.currentQueueId=r.queueId),o}},outQueue:function(e){var r=e;if(r.curConnectStatus!=u.ConnectStatus.OFFLINE){var t=a({queueId:this.currentQueueId});return t}},jumpQueue:function(e){},getQueueTime:function(e){return c(e)},getQueueLength:function(e){return s(e)},getQueuePos:function(e){return i(e)}},o.prototype.callbackFunctionRegister=function(e,r){"object"==typeof r.queueOpt&&("function"==typeof r.queueOpt.onAreaChanged&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onAreaChanged",r.queueOpt.onAreaChanged,!1),"function"==typeof r.queueOpt.onQueueChanged&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onQueueChanged",r.queueOpt.onQueueChanged,!1),"function"==typeof r.queueOpt.onServiceNotify&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onServiceNotify",r.queueOpt.onServiceNotify,!1),"function"==typeof r.queueOpt.onElseAgentStatusChanged&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onElseAgentStatusChanged",r.queueOpt.onElseAgentStatusChanged,!1))};var l=new o;r.instance=l},function(e,r,t){function o(){this.handlers={},this.eventTarget=j.instance,this.constant=x.instance,this.anychatSDKInstance=null,this.roomId=null}function n(e,r){if($.callbackLog("Connect",r),0!=r){var t={code:r,msg:X.checkErrorMsg(r)};te.eventTarget.fireEvent({type:"onDisConnect",result:t})}else te.anychatSDKInstance.login()}function a(e,r){0==r&&(te.anychatSDKInstance.curConnectStatus=ee.ConnectStatus.OPEN),Q.instance.userId=e;var t=re(e);""==t&&(t=e,Q.instance.isSupportEx=!1),bSupportHtml5||(te.anychatSDKInstance.strUserId=t);var o=-1;if(0==r){switch(Q.instance.userType){case USER_TYPE_CLIENT:o=0;break;case USER_TYPE_AGENT:W.instance.currentAgentID=e,o=1==q.instance.isAutoMode?ANYCHAT_OBJECT_FLAGS_AGENT+ANYCHAT_OBJECT_FLAGS_AUTOMODE:ANYCHAT_OBJECT_FLAGS_AGENT}if(o!=-1){var n=q.instance.priority,a=q.instance.attribute?q.instance.attribute:"";if(BRAC_SetSDKOption(BRAC_SO_OBJECT_INITFLAGS,o),0==o){BRAC_ObjectSetValue(ANYCHAT_OBJECT_TYPE_CLIENTUSER,e,ANYCHAT_OBJECT_INFO_PRIORITY,n);var s=-1;BRAC_ObjectSetValue(ANYCHAT_OBJECT_TYPE_CLIENTUSER,e,ANYCHAT_OBJECT_INFO_ATTRIBUTE,s)}else BRAC_ObjectSetValue(ANYCHAT_OBJECT_TYPE_CLIENTUSER,e,ANYCHAT_OBJECT_INFO_PRIORITY,n),BRAC_ObjectSetValue(ANYCHAT_OBJECT_TYPE_CLIENTUSER,e,ANYCHAT_OBJECT_INFO_ATTRIBUTE,a)}var i={code:r,msg:X.checkErrorMsg(r)},c={userId:t};te.eventTarget.fireEvent({type:"onLogin",data:c})}else{var i={code:r,msg:X.checkErrorMsg(r)};te.eventTarget.fireEvent({type:"onDisConnect",result:i})}$.callbackLog("LoginSystem",r,c)}function s(e,r){var t={code:r,msg:X.checkErrorMsg(r)};if(te.eventTarget.fireEvent({type:"onDisConnect",result:t}),te.anychatSDKInstance.curConnectStatus=ee.ConnectStatus.OFFLINE,te.eventTarget.doneHandlers.length>0)for(var o=0;o<te.eventTarget.doneHandlers.length;o++)te.eventTarget.fireEvent({type:te.eventTarget.doneHandlers[o],result:t});$.callbackLog("LinkClose",r)}function i(e,r){o.roomId=e;var t={code:r,msg:X.checkErrorMsg(r)},n={roomId:e};te.eventTarget.fireEvent({type:"OnAnyChatEnterRoom",result:t,data:n}),$.callbackLog("EnterRoom",r,n)}function c(e,r){}function d(e,r){var t="";if(r)t=re(e),Q.instance.atRoomUserList.push({intUserId:e,strUserId:t});else for(var n=0;n<Q.instance.atRoomUserList.length;n++)if(Q.instance.atRoomUserList[n].intUserId==e){t=Q.instance.atRoomUserList[n].strUserId,Q.instance.atRoomUserList.splice(n,1);break}var a=Q.instance.atRoomUserList,s={userId:t,roomId:o.roomId,action:r};te.eventTarget.fireEvent({type:"onRoomUserInAndOut",result:s});var i={userList:a,userNum:a.length,roomId:o.roomId};te.eventTarget.fireEvent({type:"onRoomUserChanged",data:i}),$.callbackLog("onRoomUserChanged",0,s)}function C(e,r,t,o,n){var a=re(e),s=re(r),i={userId:a,toUserId:s,msg:o};te.eventTarget.fireEvent({type:"onRoomUserMsgReceived",data:i}),$.callbackLog("TextMessage",0,i)}function u(e,r,t){var o=re(e);if(""!=r){var n={userId:o,msg:r};te.eventTarget.fireEvent({type:"onReceiveBuffer",data:n})}}function l(e,r,t,o,n,a){var s=re(e);if(""!=r){var i=Q.Base64.decode(r);if(i.indexOf("#")==-1){for(var c=i,d=0;d<Q.instance.currentMsgTaskId.length;d++)if(Q.instance.currentMsgTaskId[d].msgId==c){var C=Q.instance.currentMsgTaskId[d].msgContent;clearTimeout(Q.instance.currentMsgTaskId[d].timer),Q.instance.currentMsgTaskId.slice(d,1);break}var u={userId:s,msg:C};return te.eventTarget.fireEvent({type:"onTransBufferDone",result:{code:0,msg:"发送成功"},data:u}),void $.callbackLog("TransBuffer",0,u)}var c=i.substring(0,i.indexOf("#")),l=i.substring(i.indexOf("#")+1,i.length);try{l=JSON.parse(l)}catch(e){}BRAC_TransBufferEx(e,Q.Base64.encode(c),0,0,0);var u={userId:s,msg:l};te.eventTarget.fireEvent({type:"onReceiveBuffer",data:u}),$.callbackLog("ReceiveBuffer",0,u)}}function g(e,r){}function A(e,r){var t={userId:e,status:r};te.eventTarget.fireEvent({type:"onAnyChatFriendStatus",result:t})}function _(e,r){}function f(e,r){}function p(e,r){}function E(e,r){}function I(e,r){}function S(e,r){}function R(e,r){}function T(e,r,t,o,n,a,s){var i=re(e),c=(JSON.parse(s),{code:r,msg:X.checkErrorMsg(r)});if(1024&n)if(0==c.code){var d={userid:i,filePath:t};te.eventTarget.fireEvent({type:"onSnapshotDone",result:c,data:d}),$.callbackLog("Snapshot",r,d)}else te.eventTarget.fireEvent({type:"onSnapshotDone",result:c}),$.callbackLog("Snapshot",r);else{var C=1;if(BRAC_SetSDKOption(BRAC_SO_AUDIO_VADCTRL,C),0==c.code){var u={userid:i,filePath:t,elapse:o};te.eventTarget.fireEvent({type:"onRecordDone",result:c,data:u}),$.callbackLog("Record",r,d)}else te.eventTarget.fireEvent({type:"onRecordDone",result:c}),$.callbackLog("Record",r)}}function h(e,r,t,o,n,a,s){if(Q.instance.userId==e){var i={code:0,msg:X.checkErrorMsg(0)},c={filename:r,filePath:t,fileLength:o};te.eventTarget.fireEvent({type:"onFileUploadDone",result:i,data:c}),$.callbackLog("FileUpload",0,c)}else{var i={code:0,msg:X.checkErrorMsg(0)},d=re(e),c={userid:d,filename:r,filePath:t,fileLength:o};te.eventTarget.fireEvent({type:"onFileReceived",result:i,data:c}),$.callbackLog("FileReceive",0,c)}}function O(e,r){switch(parseInt(e)){case ANYCHAT_CORESDKEVENT_PPTHELPER:v(r)}}function v(e){J.downLoadCallBack(e)}function m(e,r,t,o,n,a){switch(e){case BRAC_VIDEOCALL_EVENT_REQUEST:y(r,t,o,n,a);break;case BRAC_VIDEOCALL_EVENT_REPLY:N(r,t,o,n,a);break;case BRAC_VIDEOCALL_EVENT_START:B(r,t,o,n,a);break;case BRAC_VIDEOCALL_EVENT_FINISH:D(r,t,o,n,a)}}function y(e,r,t,o,n){var a=re(e),s={userId:a,userStr:n};te.eventTarget.fireEvent({type:"onReceiveVideoCallRequest",data:s}),$.callbackLog("ReceiveVideoCallRequest",0,s)}function N(e,r,t,o,n){var a=re(e),s={code:r,msg:X.checkErrorMsg(r)},i={userId:a};switch(r){case GV_ERR_SUCCESS:te.eventTarget.fireEvent({type:"onRequestVideoCallDone",result:s,data:i}),$.callbackLog("RequestVideoCallDone",r,i);break;case GV_ERR_SESSION_QUIT:BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_FINISH,e,0,0,0,"");te.eventTarget.fireEvent({type:"onReceiveVideoCallError",result:s}),$.callbackLog("ReceiveVideoCallError",r);break;case GV_ERR_SESSION_OFFLINE:te.eventTarget.fireEvent({type:"onRequestVideoCallDone",result:s,data:i}),$.callbackLog("RequestVideoCallDone",r,i);break;case GV_ERR_SESSION_BUSY:BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_FINISH,e,0,0,0,"");te.eventTarget.fireEvent({type:"onRequestVideoCallDone",result:s,data:i}),$.callbackLog("RequestVideoCallDone",r,i);break;case GV_ERR_SESSION_REFUSE:BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_FINISH,e,0,0,0,"");te.eventTarget.fireEvent({type:"onReceiveVideoCallError",result:s}),$.callbackLog("ReceiveVideoCallError",r);break;case GV_ERR_SESSION_TIMEOUT:2==Q.instance.userType&&BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AGENT,Q.instance.userId,ANYCHAT_AGENT_CTRL_FINISHSERVICE,r,0,0,0,""),te.eventTarget.fireEvent({type:"onReceiveVideoCallError",result:s}),$.callbackLog("ReceiveVideoCallError",r);break;case GV_ERR_SESSION_DISCONNECT:te.eventTarget.fireEvent({type:"onReceiveVideoCallError",result:s,data:i}),$.callbackLog("ReceiveVideoCallError",r,i)}}function B(e,r,t,o,n){var a=re(e);z.instance.isVideoCall=!0;var s={userId:a,roomId:o};te.eventTarget.fireEvent({type:"onReceiveVideoCallStart",data:s}),$.callbackLog("ReceiveVideoCallStart",r,s)}function D(e,r,t,o,n){z.instance.isVideoCall=!1,Q.instance.userType==USER_TYPE_AGENT&&BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AGENT,Q.instance.userId,ANYCHAT_AGENT_CTRL_FINISHSERVICE,0,0,0,0,"");var a=re(e),s={userId:a},i={code:r,msg:X.checkErrorMsg(r)};te.eventTarget.fireEvent({type:"onReceiveVideoCallFinish",result:i,data:s}),$.callbackLog("ReceiveVideoCallFinish",r,s)}function M(e,r){if(e==ANYCHAT_OBJECT_TYPE_AREA){var t={};t.areaId=r,t.areaName=W.getAreaName({areaId:r}),t.areaDesc=W.getAreaDescription({areaId:r}),W.instance.areaIdArray[W.instance.areaIdIndex]=t,W.instance.areaIdIndex++}else e==ANYCHAT_OBJECT_TYPE_QUEUE||e==ANYCHAT_OBJECT_TYPE_AGENT}function L(e,r){if(e==ANYCHAT_OBJECT_TYPE_AREA){var t={code:0,msg:X.checkErrorMsg(0)},o={areas:W.instance.areaIdArray};te.eventTarget.fireEvent({type:"onSyncAreasDone",result:t,data:o}),$.callbackLog("SyncAreasDone",0,o)}}function U(e,r,t){var o={code:t,msg:X.checkErrorMsg(t)},n={};if(n.areaId=r,n.areaName=W.getAreaName({areaId:r}),n.areaDesc=W.getAreaDescription({areaId:r}),0==t){n.guestCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,r,ANYCHAT_AREA_INFO_GUESTCOUNT);var a=BRAC_ObjectGetIdList(ANYCHAT_OBJECT_TYPE_QUEUE);n.agentCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,r,ANYCHAT_AREA_INFO_AGENTCOUNT),n.idleAgentCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,r,ANYCHAT_AREA_INFO_IDLEAGENTCOUNT);var s=0,i=[];for(var c in a){var d={},C=parseInt(a[c]),u=BRAC_ObjectGetStringValue(ANYCHAT_OBJECT_TYPE_QUEUE,C,ANYCHAT_OBJECT_INFO_NAME),l=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,C,ANYCHAT_QUEUE_INFO_LENGTH);l=l<0?0:l,s+=l;var g=BRAC_ObjectGetStringValue(ANYCHAT_OBJECT_TYPE_QUEUE,C,ANYCHAT_OBJECT_INFO_DESCRIPTION);d.id=C,d.name=u,d.desc=g,i.push(d)}if(n.queueCount=a.length,n.queningUserCount=s,n.queues=i,Q.instance.userType==USER_TYPE_AGENT){F();BRAC_ObjectControl(ANYCHAT_OBJECT_TYPE_AGENT,Q.instance.userId,ANYCHAT_AGENT_CTRL_SERVICESTATUS,ANYCHAT_AGENT_STATUS_CLOSEED,0,0,0,"")}}te.eventTarget.fireEvent({type:"onEnterAreaDone",result:o,data:n}),$.callbackLog("EnterAreaDone",t,n)}function k(e,r,t){var o={code:t,msg:X.checkErrorMsg(t)};te.eventTarget.fireEvent({type:"onLeaveAreaDone",result:o}),$.callbackLog("LeaveAreaDone",t)}function b(e,r,t){Q.instance.userType==USER_TYPE_AGENT&&F();var o={};o.areaId=r,o.userCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AREA,r,ANYCHAT_AREA_INFO_GUESTCOUNT),te.eventTarget.fireEvent({type:"onAreaChanged",data:o}),$.callbackLog("AreaChanged",t,o)}function P(e,r){Q.instance.userType==USER_TYPE_AGENT&&F();var t={};t.queueId=r,t.userCount=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_LENGTH),te.eventTarget.fireEvent({type:"onQueueChanged",data:t}),$.callbackLog("QueueChanged",0,t)}function V(e,r,t){var o={code:t,msg:X.checkErrorMsg(t)},n={};if(0==t){n.userNumInQueue=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_LENGTH);var a=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_MYSEQUENCENO);a=a<0?0:a,a++,n.currentPos=a,n.enqueueTime=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_MYENTERQUEUETIME)}te.eventTarget.fireEvent({type:"onEnqueueDone",result:o,data:n}),$.callbackLog("EnqueueDone",t,n),q.instance.currentQueueId==r&&(q.instance.waitingTimer&&(q.instance.waitingTimer=10011),q.instance.waitingTimer=setInterval(function(){var e={};e.userNumInQueue=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_LENGTH);var t=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_BEFOREUSERNUM);t=t<0?0:t,t++,e.currentPos=t,e.waitingTime=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_QUEUE,r,ANYCHAT_QUEUE_INFO_WAITTIMESECOND);var o={code:0,msg:X.checkErrorMsg(0)};te.eventTarget.fireEvent({type:"onProcessChanged",result:o,data:e})},1e3))}function Y(e,r,t){var o={code:t,msg:X.checkErrorMsg(t)};te.eventTarget.fireEvent({type:"onCancelQueuingDone",result:o}),$.callbackLog("CancelQueuingDone",t),0==t&&(q.instance.waitingTimer&&(clearInterval(q.instance.waitingTimer),q.instance.waitingTimer=null),q.instance.currentQueueId="")}function H(e,r,t){if(e==ANYCHAT_OBJECT_TYPE_AGENT&&Q.instance.userId==r){t==ANYCHAT_AGENT_STATUS_WAITTING?F():t==ANYCHAT_AGENT_STATUS_WORKING||t==ANYCHAT_AGENT_STATUS_PAUSED||t==ANYCHAT_AGENT_STATUS_CLOSEED;var o={status:t};te.eventTarget.fireEvent({type:"onAgentStatusChanged",result:o}),$.callbackLog("AgentStatusChanged",0,o)}else if(e==ANYCHAT_OBJECT_TYPE_AGENT&&Q.instance.userId!=r){var o={status:t,userId:re(r)};te.eventTarget.fireEvent({type:"onElseAgentStatusChanged",result:o}),$.callbackLog("ElseAgentStatusChanged",0,o)}}function F(){if(Q.instance.userType==USER_TYPE_AGENT){var e=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AGENT,W.instance.currentAgentID,ANYCHAT_AGENT_INFO_SERVICEBEGINTIME),r=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AGENT,W.instance.currentAgentID,ANYCHAT_AGENT_INFO_SERVICETOTALTIME),t=BRAC_ObjectGetIntValue(ANYCHAT_OBJECT_TYPE_AGENT,W.instance.currentAgentID,ANYCHAT_AGENT_INFO_SERVICETOTALNUM),o={serviceBeginTime:e,serviceTotalTime:r,serviceUserCount:t};te.eventTarget.fireEvent({type:"onAgentServiceInfoNotify",result:o}),$.callbackLog("AgentServiceInfoNotify",0,o)}}function G(e,r,t){Q.instance.userId==r&&(q.instance.waitingTimer&&(clearInterval(q.instance.waitingTimer),q.instance.waitingTimer=null),q.instance.currentQueueId="");var o=re(e),n=re(r),a={queueId:t,agentId:o,customerId:n,eventType:"serviceStart"};te.eventTarget.fireEvent({type:"onServiceNotify",data:a}),$.callbackLog("ServiceNotify",0,a)}function w(){console.log("队列里没有客户")}function K(e,r,t){var o=re(e),n=re(r),a={queueId:t,agentId:o,customerId:n,eventType:"agentPrepared"};te.eventTarget.fireEvent({type:"onServiceNotify",result:a}),$.callbackLog("ServiceNotify",0,a)}var x=t(2),j=t(3),J=t(9),Q=t(4),q=t(7),W=t(6),X=t(5),z=t(10),Z=(t(11),t(1)),$=Z.getLogger("AnyChatSDKEventDispatcher"),ee=x.instance,re=Q.getStrUserId;o.prototype={constructor:o,callbackinit:function(e,r){this.anychatSDKInstance=e,"function"==typeof this.OnAnyChatNotifyMessage&&BRAC_RegisterCallBack(r,"OnNotifyMessage",this.OnAnyChatNotifyMessage),"function"==typeof C&&BRAC_RegisterCallBack(r,"OnTextMessage",C),"function"==typeof u&&BRAC_RegisterCallBack(r,"OnTransBuffer",u),"function"==typeof l&&BRAC_RegisterCallBack(r,"OnTransBufferEx",l),"function"==typeof h&&BRAC_RegisterCallBack(r,"OnTransFile",h),"function"==typeof OnAnyChatVolumeChange&&BRAC_RegisterCallBack(r,"OnVolumeChange",OnAnyChatVolumeChange),"function"==typeof OnAnyChatSDKFilterData&&BRAC_RegisterCallBack(r,"OnSDKFilterData",OnAnyChatSDKFilterData),"function"==typeof m&&BRAC_RegisterCallBack(r,"OnVideoCallEvent",m),"function"==typeof OnAnyChatRecordSnapShot&&BRAC_RegisterCallBack(r,"OnRecordSnapShot",OnAnyChatRecordSnapShot),"function"==typeof OnAnyChatRecordSnapShotEx&&bSupportStreamRecordCtrlEx&&BRAC_RegisterCallBack(r,"OnRecordSnapShotEx",OnAnyChatRecordSnapShotEx),"function"==typeof T&&bSupportCluster&&BRAC_RegisterCallBack(r,"OnRecordSnapShotEx2",T),"function"==typeof O&&CUR_ANYCHAT_PLUGIN_VAR>="1.0.6.0"&&BRAC_RegisterCallBack(r,"OnAnyChatCoreSDKEvent",O),"function"==typeof this.OnAnyChatObjectEvent&&bSupportObjectBusiness&&BRAC_RegisterCallBack(r,"OnObjectEvent",this.OnAnyChatObjectEvent)},h5On:function(e,r){this.anychatSDKInstance=e,"function"==typeof this.OnAnyChatNotifyMessage&&r.on("OnNotifyMessage",this.OnAnyChatNotifyMessage),"function"==typeof m&&r.on("OnVideoCallEvent",m),"function"==typeof u&&r.on("OnTransBuffer",u),"function"==typeof C&&r.on("OnTextMessage",C),"function"==typeof this.OnAnyChatObjectEvent&&r.on("OnObjectEvent",this.OnAnyChatObjectEvent),"function"==typeof l&&r.on("OnTransBufferex",l)},OnAnyChatNotifyMessage:function(e,r,t){switch(e){case WM_GV_CONNECT:n(r,t);break;case WM_GV_LOGINSYSTEM:a(r,t);break;case WM_GV_ENTERROOM:i(r,t);break;case WM_GV_ONLINEUSER:c(r,t);break;case WM_GV_USERATROOM:d(r,t);break;case WM_GV_LINKCLOSE:s(r,t);break;case WM_GV_MICSTATECHANGE:_(r,t);break;case WM_GV_CAMERASTATE:f(r,t);break;case WM_GV_P2PCONNECTSTATE:p(r,t);break;case WM_GV_PRIVATEREQUEST:E(r,t);break;case WM_GV_PRIVATEECHO:I(r,t);break;case WM_GV_PRIVATEEXIT:S(r,t);break;case WM_GV_USERINFOUPDATE:g(r,t);break;case WM_GV_FRIENDSTATUS:A(r,t);break;case WM_GV_VIDEOSIZECHG:R(r,t)}},OnAnyChatObjectEvent:function(e,r,t,o,n,a,s,i){switch(console.log("OnAnyChatObjectEvent dwEventType: "+t),t){case ANYCHAT_OBJECT_EVENT_UPDATE:M(e,r);break;case ANYCHAT_OBJECT_EVENT_SYNCDATAFINISH:L(e,r);break;case ANYCHAT_AREA_EVENT_ENTERRESULT:U(e,r,o);break;case ANYCHAT_AREA_EVENT_LEAVERESULT:k(e,r,o);break;case ANYCHAT_AREA_EVENT_STATUSCHANGE:b(e,r,o);break;case ANYCHAT_QUEUE_EVENT_STATUSCHANGE:P(e,r);break;case ANYCHAT_QUEUE_EVENT_ENTERRESULT:V(e,r,o);break;case ANYCHAT_QUEUE_EVENT_LEAVERESULT:Y(e,r,o);break;case ANYCHAT_AGENT_EVENT_STATUSCHANGE:H(e,r,o);break;case ANYCHAT_AGENT_EVENT_SERVICENOTIFY:G(o,n,a);break;case ANYCHAT_AGENT_EVENT_WAITINGUSER:w();break;case ANYCHAT_AGENT_EVENT_ISREADY:K(o,n,a)}}};var te=new o;r.instance=te},function(e,r,t){function o(e){this.guid=BRAC_NewGuid(),this.objParam=e,this.action=this.objParam.action,this.fileParams=0,this.timer,this.statusInfo={process:0,bitRate:0,status:1},this.mediaDataInfo=[]}function n(e){var r=0;e.userId&&(r=e.userId);var t="";e.localPath&&(t=e.localPath);var o=BRAC_TransFileEx(e.taskGuid,r,t,0,"");return o}function a(e){return BRAC_CancelTransTaskEx(e.taskGuid,0,0)}function s(e){var r={};return r.progress=BRAC_QueryTransTaskInfoEx(e.taskGuid,BRAC_TRANSTASK_PROGRESS),r.bitRate=BRAC_QueryTransTaskInfoEx(e.taskGuid,BRAC_TRANSTASK_BITRATE),r.status=BRAC_QueryTransTaskInfoEx(e.taskGuid,BRAC_TRANSTASK_STATUS),r}function i(e,r){var t={ctrlcode:BRPPT_FILECTRL_DOWNLOAD,fileid:e.taskGuid,fileurl:e.fileurl,filemd5:"",filetype:e.filetype},o=JSON.parse(BRAC_SDKControl(p,JSON.stringify(t)));if(0==o.errorcode){var n={};n.fileid=e.taskGuid,n.type=e.filetype,r.mediaDataInfo.push(n)}return o.errorcode}function c(e){var r={ctrlcode:BRPPT_FILECTRL_CANCEL,fileid:e.taskGuid};return BRAC_SetSDKOption(BRAC_SO_CORESDK_PPTFILECTRL,JSON.stringify(r))}function d(e){var r={infocode:BRPPT_FILEINFO_DOWNLOAD_STATUS,fileid:e.taskGuid},t=BRAC_SDKControl(E,JSON.stringify(r));return JSON.parse(t)}function C(e){var r=JSON.parse(e),t={};if(0!=r.errorcode){var o={code:r.errorcode,msg:_.checkErrorMsg(r.errorcode)},n={};return void AnyChatWebSDK.anychatSDKInstance.eventTarget.fireEvent({type:"onDownloadDone",result:o,data:n})}var a=l(r.fileid);t.dataInfo=a,t.downloadResult=r;var s=u(a),o={code:r.errorcode,msg:_.checkErrorMsg(r.errorcode)},n=s;AnyChatWebSDK.anychatSDKInstance.eventTarget.fireEvent({type:"onDownloadDone",result:o,data:n})}function u(e){var r=e.filepath,t=e.details;switch(t.file_type){case I:for(var o=r+t.audio_address,n=[],a=t.pptlist,s=0;s<a.length;s++){var i={};i.ppt_address=r+a[s].ppt_address,i.audio_start=a[s].audio_start,i.audio_end=a[s].audio_end,n.push(i)}e.details.audio_address=o,e.details.pptlist=n;break;case S:break;case R:}return e}function l(e){var r={infocode:BRPPT_FILEINFO_PPTDETAILS,fileid:e},t=BRAC_SDKControl(E,JSON.stringify(r));return JSON.parse(t)}var g=t(1),A=g.getLogger("AnyChatSDKFileHandler"),_=t(5),f=90,p=91,E=92,I=1,S=2,R=3;o.prototype={constructor:o,start:function(){var e={};e.taskGuid=this.guid,this.objParam.userId&&(e.userId=this.objParam.userId),this.objParam.localPath&&(e.localPath=this.objParam.localPath),this.objParam.fileurl&&(e.fileurl=this.objParam.fileurl),this.objParam.filetype&&(e.filetype=this.objParam.filetype);var r=1e3;this.objParam.intervalTime&&(r=1e3*this.objParam.intervalTime);var t=this.guid,o=this.objParam,a=this;if(a.timer&&clearInterval(a.timer),"upload"==this.action){var c=n(e);0==c&&(a.timer=setInterval(function(){if(a.statusInfo=s({taskGuid:t}),"function"==typeof o.onTaskStatusChanged){var e=a.statusInfo;e.taskId=t,AnyChatWebSDK.anychatSDKInstance.eventTarget.fireEvent({type:"onTaskStatusChanged",data:e})}if(100==a.statusInfo.progress){if(a.objParam.userId){var r=a.objParam.localPath.substring(a.objParam.localPath.lastIndexOf("\\")+1,a.objParam.localPath.length),n={code:0,msg:""},i={targetId:a.objParam.userId,filePath:a.objParam.localPath,filename:r};AnyChatWebSDK.anychatSDKInstance.eventTarget.fireEvent({type:"onFileTransferDone",result:n,data:i})}clearInterval(a.timer),
a.timer=null}},r));var C="FileUploadStart";return e.userId&&(C="FileTransferStart"),A.invokeLog(C,c,e),c}a.timer=setInterval(function(){if(a.statusInfo=d({taskGuid:t}),"function"==typeof o.onDownloadTaskStatusChanged){var e=a.statusInfo;e.taskId=a.guid,AnyChatWebSDK.anychatSDKInstance.eventTarget.fireEvent({type:"onDownloadTaskStatusChanged",data:e})}100==a.statusInfo.progress&&(clearInterval(a.timer),a.timer=null)},r);var c=i(e,a);return A.invokeLog("FileDownloadStart",c,e),c},cancel:function(){var e;if("upload"==this.action){e=a({taskGuid:this.guid});var r="FileUploadCancel";this.objParam.userId&&(r="FileTransferCancel"),AnyChatWebSDK.anychatSDKInstance.callbackFunctionDestroy({onTaskStatusChanged:this.objParam.onTaskStatusChanged}),A.invokeLog(r,e)}else e=c({taskGuid:this.guid}),A.invokeLog("FileDownloadCancel",e),AnyChatWebSDK.anychatSDKInstance.callbackFunctionDestroy({onDownloadTaskStatusChanged:this.objParam.onDownloadTaskStatusChanged});return null!=this.timer&&(clearInterval(this.timer),this.timer=null),this.guid="",e},getStatus:function(){if("upload"==this.action){var e=s({taskGuid:this.guid});return e}var e=d({taskGuid:this.guid});return e},downloadInit:function(){var e={savepath:this.objParam.savepath};BRAC_SDKControl(f,JSON.stringify(e))}},r.instance=o,r.downLoadCallBack=C},function(e,r,t){function o(){this.isVideoCall=!1,this.cameraObjList=[]}function n(e){var r=BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_REQUEST,e.userId,0,0,0,"");return r}function a(e){var r=BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_REPLY,e.userId,0,0,0,"");return r}function s(e){var r=BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_REPLY,e.userId,GV_ERR_SESSION_REFUSE,0,0,"");return r}function i(e){var r=BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_REPLY,e.userId,GV_ERR_SESSION_QUIT,0,0,"");return r}function c(e){var r=BRAC_VideoCallControl(BRAC_VIDEOCALL_EVENT_FINISH,e.userId,0,0,0,"");return r}function d(e){var r=u(e.objId);u(e.renderId).removeChild(r),BRAC_SetVideoPosEx(e.userId,u(e.renderId),e.objId,e.streamIndex);var t=u(e.objId).SetSDKOptionInt(ANYCHATWEB_VIDEO_SO_VIDEODISPMODE,1);return t=u(e.objId).SetSDKOptionInt(ANYCHATWEB_VIDEO_SO_REMOTEASSIST,1)}function C(e){u(e.objId).SetSDKOptionInt(ANYCHATWEB_VIDEO_SO_VIDEODISPMODE,0),u(e.objId).SetSDKOptionInt(ANYCHATWEB_VIDEO_SO_REMOTEASSIST,0)}function u(e){return document.getElementById?document.getElementById(e):window[e]?window[e]:null}var l=t(1);l.getLogger("AnyChatSDKVideoCallHandler");o.prototype={constructor:o,request:function(e){return n({userId:e.userId})},accept:function(e){return a({userId:e.userId})},reject:function(e){return s({userId:e.userId})},hangup:function(e){return c({userId:e.userId})},cancel:function(e){return i({userId:e.userId})},openRemoteControl:d,finishRemoteControl:C},o.prototype.callbackFunctionRegister=function(e,r){"object"==typeof r.videoCallOpt&&("function"==typeof r.videoCallOpt.onReceiveVideoCallRequest&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onReceiveVideoCallRequest",r.videoCallOpt.onReceiveVideoCallRequest,!1),"function"==typeof r.videoCallOpt.onReceiveVideoCallStart&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onReceiveVideoCallStart",r.videoCallOpt.onReceiveVideoCallStart,!1),"function"==typeof r.videoCallOpt.onReceiveVideoCallFinish&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onReceiveVideoCallFinish",r.videoCallOpt.onReceiveVideoCallFinish,!1),"function"==typeof r.videoCallOpt.onReceiveVideoCallError&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onReceiveVideoCallError",r.videoCallOpt.onReceiveVideoCallError,!1))};var g=new o;r.instance=g},function(e,r,t){function o(){}var n=t(1),a=(n.getLogger("AnyChatSDKFileHandler"),t(5),1),s=2;o.prototype={constructor:o,getUserFriends:function(){var e=[];return e=BRAC_GetUserFriends()},getFriendInfo:function(e){return BRAC_GetUserInfo(e.userId,e.infoId)},getFriendNickName:function(e){return BRAC_GetUserInfo(e.userId,a)},getFriendIP:function(e){return BRAC_GetUserInfo(e.userId,s)}},o.prototype.callbackFunctionRegister=function(e,r){"object"==typeof r.friendOpt&&"function"==typeof r.friendOpt.onAnyChatFriendStatus&&AnyChatWebSDK.anychatSDKInstance.setCallBack("onAnyChatFriendStatus",r.friendOpt.onAnyChatFriendStatus,!1)};var i=new o;r.instance=i},function(e,r,t){function o(e){this.deviceName=e,this.name=e.substring(e.indexOf("-")+1,e.length),this.idx=e.substring(0,e.indexOf("-")),this.vadctrl=1,this.nsctrl=1,this.echoctrl=1,this.agcctrl=1,this.capturemode=0}function n(e){var r=BRAC_UserSpeakControlEx(e,1,0,0,"");return r}function a(e,r){var t=BRAC_UserSpeakControlEx(e,0,0,0,"");return t}var s=t(1),i=s.getLogger("AnyChatSDKAudioHandler"),c=t(4);o.prototype={constructor:o,config:function(e){e.hasOwnProperty("vadctrl")&&(this.vadctrl=e.vadctrl,BRAC_SetSDKOption(BRAC_SO_AUDIO_VADCTRL,e.vadctrl)),e.hasOwnProperty("nsctrl")&&(this.nsctrl=e.nsctrl,BRAC_SetSDKOption(BRAC_SO_AUDIO_NSCTRL,e.nsctrl)),e.hasOwnProperty("echoctrl")&&(this.echoctrl=e.echoctrl,BRAC_SetSDKOption(BRAC_SO_AUDIO_ECHOCTRL,e.echoctrl)),e.hasOwnProperty("agcctrl")&&(this.agcctrl=e.agcctrl,BRAC_SetSDKOption(BRAC_SO_AUDIO_AGCCTRL,e.agcctrl)),e.hasOwnProperty("capturemode")&&(this.capturemode=e.capturemode,BRAC_SetSDKOption(BRAC_SO_AUDIO_CAPTUREMODE,e.capturemode))},open:function(){var e=n(c.instance.userId),r={userId:c.instance.userId};return i.invokeLog("localMicrophoneOpen",e,r),e},close:function(){var e=a(c.instance.userId),r={userId:c.instance.userId};return i.invokeLog("localMicrophoneClose",e,r),e}},r.instance=o,r.openAudio=n,r.closeAudio=a},function(e,r,t){function o(e){this.deviceName=e,this.hasStreamIndex=!1,this.name=e.substring(e.indexOf("-")+1,e.length),this.idx=e.substring(0,e.indexOf("-")),this.streamIndex=e.substring(0,e.indexOf("-"))-1,this.demoId,this.isInventCamera=!1,"Native Screen Camera"==this.name&&(this.isInventCamera=!0),this.isOpen=!1,this.bitRate=9e4,this.quality=3,this.gop=30,this.width=320,this.height=240,this.fps=15,this.preset=3}function n(e){var r;return"number"==typeof e.streamIndex?e.userId==l.instance.userId?e.isShareDesktop?(BRAC_SetUserStreamInfo(e.userId,e.streamIndex,BRAC_STREAMINFO_VIDEOCODECID,e.deviceName),s(e.userId,e.streamIndex),r=BRAC_UserCameraControlEx(e.userId,1,e.streamIndex,0,""),""!=e.demoId&&BRAC_SetVideoPosEx(e.userId,d(e.demoId),"ANYCHAT_VIDEO_LOCAL_"+e.streamIndex,e.streamIndex)):(BRAC_SetUserStreamInfo(e.userId,e.streamIndex,BRAC_STREAMINFO_VIDEOCODECID,e.deviceName),r=BRAC_UserCameraControlEx(e.userId,1,e.streamIndex,0,""),BRAC_SetVideoPosEx(e.userId,d(e.demoId),"ANYCHAT_VIDEO_LOCAL_"+e.streamIndex,e.streamIndex)):(r=BRAC_UserCameraControlEx(e.userId,1,e.streamIndex,0,""),BRAC_SetVideoPosEx(e.userId,d(e.demoId),"ANYCHAT_VIDEO_REMOTE_"+e.userId+"_"+e.streamIndex,e.streamIndex)):e.userId==l.instance.userId?(BRAC_SetUserStreamInfo(e.userId,0,BRAC_STREAMINFO_VIDEOCODECID,e.deviceName),r=BRAC_UserCameraControl(e.userId,1),BRAC_SetVideoPos(e.userId,d(e.demoId),"ANYCHAT_VIDEO_LOCAL_0")):(r=BRAC_UserCameraControl(e.userId,1),BRAC_SetVideoPos(e.userId,d(e.demoId),"ANYCHAT_VIDEO_REMOTE_"+e.userId)),r}function a(e){var r;return r=e.hasOwnProperty("streamIndex")?BRAC_UserCameraControlEx(e.userId,0,e.streamIndex,0,""):BRAC_UserCameraControl(e.userId,0)}function s(e,r){BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_BITRATECTRL,15e5),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_QUALITYCTRL,3),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_WIDTHCTRL,1920),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_HEIGHTCTRL,1080),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_FPSCTRL,20),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_GOPCTRL,80),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_PRESETCTRL,3),BRAC_SetUserStreamInfo(e,r,BRAC_SO_LOCALVIDEO_APPLYPARAM,1)}function i(e,r){r.hasOwnProperty("bitRate")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_BITRATECTRL,r.bitRate),r.hasOwnProperty("quality")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_QUALITYCTRL,r.quality),r.hasOwnProperty("width")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_WIDTHCTRL,r.width),r.hasOwnProperty("height")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_HEIGHTCTRL,r.height),r.hasOwnProperty("fps")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_FPSCTRL,r.fps),r.hasOwnProperty("gop")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_GOPCTRL,r.gop),r.hasOwnProperty("preset")&&BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_PRESETCTRL,r.preset),r.hasOwnProperty("videoSizePolitic")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_VIDEOSIZEPOLITIC,r.videoSizePolitic),r.hasOwnProperty("deinterlace")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_DEINTERLACE,r.deinterlace),r.hasOwnProperty("focusCtrl")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_FOCUSCTRL,r.focusCtrl),r.hasOwnProperty("pixfmtCtrl")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_PIXFMTCTRL,r.pixfmtCtrl),r.hasOwnProperty("overlay")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_OVERLAY,r.overlay),r.hasOwnProperty("codeId")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_CODECID,r.codeId),r.hasOwnProperty("rotateCtrl")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_ROTATECTRL,r.rotateCtrl),r.hasOwnProperty("capDriver")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_CAPDRIVER,r.capDriver),r.hasOwnProperty("fixColordevia")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_FIXCOLORDEVIA,r.fixColordevia),r.hasOwnProperty("overlayTimestamp")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_OVERLAYTIMESTAMP,r.overlayTimestamp),r.hasOwnProperty("virtualbk")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_VIRTUALBK,r.virtualbk),BRAC_SetUserStreamInfo(-1,e,BRAC_SO_LOCALVIDEO_APPLYPARAM,1)}function c(e){return BRAC_GetUserStreamInfoInt(e.userId,e.streamIndex,e.infoName)}function d(e){return document.getElementById?document.getElementById(e):window[e]?window[e]:null}var C=t(1),u=C.getLogger("AnyChatSDKVideoHandler"),l=t(4);o.prototype={constructor:o,config:function(e){e.bitRate&&(this.bitRate=e.bitRate),e.quality&&(this.quality=e.quality),e.width&&(this.width=e.width),e.height&&(this.height=e.height),e.gop&&(this.gop=e.gop),e.fps&&(this.fps=e.fps),e.preset&&(this.preset=e.preset),i(this.streamIndex,e)},open:function(e){var r={};if(this.demoId=e.id,"number"==typeof e.streamIndex){this.streamIndex=e.streamIndex,this.hasStreamIndex=!0,r={userId:l.instance.userId,streamIndex:this.streamIndex,deviceName:this.deviceName,demoId:e.id?e.id:"",isShareDesktop:this.isInventCamera};var t=n(r)}else{r={userId:l.instance.userId,deviceName:this.deviceName,demoId:e.id?e.id:"",isShareDesktop:this.isInventCamera};var t=n(r)}return 0==t&&(this.isOpen=!0),u.invokeLog("localCameraOpen",t,r),t},close:function(){var e={};if(this.hasStreamIndex){e={userId:l.instance.userId,streamIndex:this.streamIndex};var r=a(e)}else{e={userId:l.instance.userId};var r=a(e)}return 0==r&&(this.isOpen=!1),u.invokeLog("localCameraClose",r,e),r}},r.instance=o,r.openVideo=n,r.closeVideo=a,r.getUserStreamInfo=c},function(e,r,t){function o(){}var n=t(1);n.getLogger("AnyChatSDKDualRecordHandler");o.prototype={constructor:o};var a=new o;r.instance=a},function(e,r,t){function o(){this.recordParams=0,this.snapshotParams=0,this.recordUserId=-1}var n=t(1),a=(n.getLogger("AnyChatSDKRecordHandler"),t(4)),s=(a.getStrUserId,a.getIntUserId);o.prototype={constructor:o,start:function(e){var r=1;e.layout&&(r=e.layout);var t={};if(e.layoutStreams&&(t.streamlist=e.layoutStreams),t.streamlist)for(var o in t.streamlist)t.streamlist[o].userid=parseInt(s(t.streamlist[o].userid));switch(this.recordParams=ANYCHAT_RECORD_FLAGS_VIDEO+ANYCHAT_RECORD_FLAGS_AUDIO+ANYCHAT_RECORD_FLAGS_MIXAUDIO+ANYCHAT_RECORD_FLAGS_MIXVIDEO+ANYCHAT_RECORD_FLAGS_STEREO+ANYCHAT_RECORD_FLAGS_LOCALCB+ANYCHAT_RECORD_FLAGS_USERFILENAME,r+""){case"1":t.recordlayout=1,this.recordUserId=t.streamlist[0].userid,this.recordParams=this.recordParams-ANYCHAT_RECORD_FLAGS_MIXAUDIO-ANYCHAT_RECORD_FLAGS_MIXAUDIO;break;case"2":t.recordlayout=2,this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_ABREAST;break;case"3":t.recordlayout=2;break;case"4":t.recordlayout=3,this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_ABREAST;break;case"5":t.recordlayout=3,t.layoutstyle=1,this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_ABREAST;break;case"6":t.recordlayout=4,this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_ABREAST;break;case"7":t.recordlayout=9,this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_ABREAST}var n=1;switch(e.mode&&(n=e.mode),n+""){case"1":break;case"2":this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_SERVER;var a=0;BRAC_SetSDKOption(BRAC_SO_AUDIO_VADCTRL,a);break;case"3":this.recordParams=this.recordParams+ANYCHAT_RECORD_FLAGS_SERVER+ANYCHAT_RECORD_FLAGS_STREAM;var a=0;BRAC_SetSDKOption(BRAC_SO_AUDIO_VADCTRL,a)}var i=1;switch(e.content&&(i=e.content),i+""){case"1":break;case"2":this.recordParams=this.recordParams-ANYCHAT_RECORD_FLAGS_VIDEO-ANYCHAT_RECORD_FLAGS_MIXVIDEO;break;case"3":this.recordParams=this.recordParams-ANYCHAT_RECORD_FLAGS_AUDIO-ANYCHAT_RECORD_FLAGS_MIXAUDIO}if(e.hasOwnProperty("fileType")&&BRAC_SetSDKOption(BRAC_SO_RECORD_FILETYPE,parseInt(e.fileType)-1),e.hasOwnProperty("clipMode"))var c=BRAC_SetSDKOption(BRAC_SO_RECORD_CLIPMODE,parseInt(e.clipMode));e.hasOwnProperty("fileName")&&(t.filename=e.fileName),e.localFilePath&&BRAC_SetSDKOption(BRAC_SO_RECORD_TMPDIR,e.localFilePath),e.width&&BRAC_SetSDKOption(BRAC_SO_RECORD_WIDTH,e.width),e.height&&BRAC_SetSDKOption(BRAC_SO_RECORD_HEIGHT,e.height),e.picWatermark&&(t.watermark=e.picWatermark),e.textWatermark&&(t.textoverlay=e.textWatermark);var c=BRAC_StreamRecordCtrlEx(this.recordUserId,1,this.recordParams,0,JSON.stringify(t));return c},stop:function(){var e=BRAC_StreamRecordCtrlEx(this.recordUserId,0,this.recordParams,0,"");return 0==e&&(this.recordUserId=-1),e},insertFile:function(e){var r=BRAC_SetSDKOption(BRAC_SO_RECORD_INSERTIMAGE,JSON.stringify(e));return r},snapshot:function(e){var r={};this.snapshotParams=ANYCHAT_RECORD_FLAGS_SNAPSHOT+ANYCHAT_RECORD_FLAGS_USERFILENAME;var t=1;e.mode&&(t=e.mode);var o=0;switch(e.streamIndex&&(o=e.streamIndex),r.streamindex=o,r.isPhoto=1,t+""){case"1":break;case"2":this.snapshotParams=this.snapshotParams+ANYCHAT_RECORD_FLAGS_SERVER+ANYCHAT_RECORD_FLAGS_LOCALCB}e.hasOwnProperty("fileName")&&(r.filename=e.fileName),e.localFilePath&&BRAC_SetSDKOption(BRAC_SO_SNAPSHOT_TMPDIR,e.localFilePath);var n=BRAC_StreamRecordCtrlEx(s(e.userId),1,this.snapshotParams,o,JSON.stringify(r));return n}};var i=new o;r.instance=i},function(e,r,t){function o(){}function n(e){var r=BRAC_SetSDKOption(BRAC_SO_ENABLEWEBSERVICE,e);return r}function a(e){var r=BRAC_SetSDKOption(BRAC_SO_LOCALPATH2URL,e);return r}function s(e){var r=BRAC_SetSDKOption(BRAC_SO_VIDEOBKIMAGE,e);return r}function i(e){var r=BRAC_SetSDKOption(BRAC_SO_NETWORK_P2PPOLITIC,e);return r}function c(e){var r=BRAC_SetSDKOption(BRAC_SO_VIDEOSHOW_CLIPMODE,e);return r}function d(e){var r=BRAC_SetSDKOption(BRAC_SO_CORESDK_UPLOADLOGINFO,e);return r}var C=t(1),u=C.getLogger("AnyChatSDKSettingHandler"),l=t(2);l.instance;o.prototype={constructor:o,setSDKOption:function(e){if(e.hasOwnProperty("enableWebService")){var r=n(parseInt(e.enableWebService));u.invokeLog("enableWebService",r,{enableWebService:e.enableWebService})}if(e.hasOwnProperty("localPath2Url")){var r=a(parseInt(e.localPath2Url));u.invokeLog("localPath2Url",r,{localPath2Url:e.localPath2Url})}if(e.hasOwnProperty("videoBgImage")){var r=s(e.videoBgImage);u.invokeLog("videoBgImage",r,{videoBgImage:e.videoBgImage})}if(e.hasOwnProperty("P2PPolitic")){var r=i(parseInt(e.P2PPolitic));u.invokeLog("P2PPolitic",r,{P2PPolitic:e.P2PPolitic})}if(e.hasOwnProperty("remoteVideoMode")){var r=c(parseInt(e.remoteVideoMode));u.invokeLog("remoteVideoMode",r,{remoteVideoMode:e.remoteVideoMode})}if(e.hasOwnProperty("uploadLogInfo")){var r=d(parseInt(e.uploadLogInfo));u.invokeLog("uploadLogInfo",r,{uploadLogInfo:e.uploadLogInfo})}e.hasOwnProperty("applyParam")&&BRAC_SetSDKOption(BRAC_SO_LOCALVIDEO_APPLYPARAM,e.applyParam)},getVersionInfo:function(){var e="V"+BRAC_GetVersion(1)+" Build time: "+BRAC_GetSDKOptionString(BRAC_SO_CORESDK_BUILDTIME);return e},getState:function(e){return 6==parseInt(e.infoName)||7==parseInt(e.infoName)||8==parseInt(e.infoName)?BRAC_QueryUserStateString(e.userId,e.infoName):BRAC_QueryUserStateInt(e.userId,e.infoName)},getSDKOptionInt:function(e){return BRAC_GetSDKOptionInt(e)},getSDKOptionString:function(e){return BRAC_GetSDKOptionString(e)}};var g=new o;r.instance=g}]);